(()=>{"use strict";const e=(()=>{let e=JSON.parse(localStorage.getItem("toDos"))||[];return{createTodo:(t,o,n,c)=>{let d={name:t,date:o,priority:n,projectId:parseInt(c),id:(new Date).getTime()};return e.push(d),localStorage.setItem("toDos",JSON.stringify(e)),{toDos:e}},toDos:e,updateTodo:(t,o,n,c,d)=>{let r=parseInt(d);t.name=o,t.date=n,t.priority=c,t.projectId=r,localStorage.setItem("toDos",JSON.stringify(e))}}})(),t=(()=>{const t=JSON.parse(localStorage.getItem("projectList"))||[{name:"Personal",id:1}],n=()=>{const e=document.getElementById("project");e.innerHTML="",t.forEach((t=>{const o=document.createElement("option");o.value=t.id,o.setAttribute("dataset",t.id),o.classList.add("project-option"),o.textContent=t.name,e.appendChild(o)}))},c=()=>{const n=document.querySelector(".project-container");n.innerHTML="",t.forEach((c=>{const d=document.createElement("div");d.className="project-div";const r=document.createElement("h2");r.classList.add("project-name");const a=document.createElement("span");a.classList.add("material-symbols-outlined","edit"),a.textContent="edit",a.addEventListener("click",(()=>{o.showForm("Edit Project Name"),o.editProject(c)}),{once:!0});const s=document.createElement("button");s.classList.add("add-todo","project-icon");const l=document.createElement("span");l.classList.add("material-symbols-outlined","edit"),l.textContent="add",s.append(l,"Add To Do"),s.addEventListener("click",(()=>{o.showForm("Create New Item"),o.newToDo(c)}),{once:!0}),r.textContent=c.name,n.appendChild(d),d.appendChild(r),r.appendChild(a),d.appendChild(s),localStorage.setItem("projectList",JSON.stringify(t)),e.toDos.forEach((e=>{if(e.projectId===c.id){const t=document.createElement("div");t.classList.add("to-do-item"),t.setAttribute("id",e.id);const n=document.createElement("input");n.setAttribute("type","checkbox");const c=document.createElement("span");c.textContent=e.name;const r=document.createElement("span");r.textContent=e.priority;const a=document.createElement("span");a.textContent=e.date;const s=document.createElement("span");s.classList.add("material-symbols-outlined","edit"),s.textContent="edit",s.addEventListener("click",(()=>{o.showForm("Edit To Do"),o.editToDo(e)})),d.appendChild(t),t.append(n,c,r,a,s)}}))}));const c=document.createElement("button");c.classList.add("project-icon");const d=document.createElement("span");d.classList.add("material-symbols-outlined","edit"),d.textContent="add",c.append(d,"Create New List"),n.appendChild(c),c.addEventListener("click",(()=>{o.showForm("Create New List"),o.newProject()}))};return c(),n(),{createProject:e=>{const o={name:e,id:(new Date).getTime()};t.push(o),localStorage.setItem("projectList",JSON.stringify(t)),n()},projectList:t,updateProject:(e,o)=>{e.name=o,localStorage.setItem("projectList",JSON.stringify(t)),n()},displayProject:c}})(),o=(()=>{const o=document.querySelector(".add-todo"),n=document.querySelector("#form-message"),c=document.querySelector(".form-container"),d=document.querySelector(".project-container"),r=document.querySelector(".date"),a=document.querySelector(".priority"),s=document.querySelector(".project-select"),l=document.querySelector(".buttons"),i=()=>{o.classList.remove("hidden"),n.textContent="",c.classList.add("hidden"),d.classList.remove("hidden"),t.displayProject()},u=()=>{r.classList.remove("hidden"),a.classList.remove("hidden"),s.classList.remove("hidden")},m=()=>{r.classList.add("hidden"),a.classList.add("hidden"),s.classList.add("hidden")};return{showForm:e=>{l.innerHTML="",document.querySelector("#priority").selectedIndex=0,document.querySelector("#project").selectedIndex=0;let t=document.querySelectorAll("input");for(let e=0;e<t.length;e++)t[e].value="";d.classList.add("hidden"),n.textContent=e,c.classList.remove("hidden")},hideForm:i,newToDo:t=>{u(),document.querySelector("#project").value=t.id;const o=document.createElement("button");o.textContent="Submit",o.addEventListener("click",(t=>{t.preventDefault(),e.createTodo(document.querySelector("#name").value,document.querySelector("#date").value,document.querySelector("#priority").value,document.querySelector("#project").value),i()})),l.appendChild(o);const n=document.createElement("button");n.textContent="Cancel",n.addEventListener("click",(e=>{e.preventDefault(),i()})),l.appendChild(n)},editToDo:t=>{u(),document.querySelector("#name").value=t.name,document.querySelector("#date").value=t.date,document.querySelector("#priority").value=t.priority,document.querySelector("#project").value=t.projectId;const o=document.createElement("button");o.textContent="Update",o.addEventListener("click",(o=>{o.preventDefault(),e.updateTodo(t,document.querySelector("#name").value,document.querySelector("#date").value,document.querySelector("#priority").value,document.querySelector("#project").value),i()})),l.appendChild(o);const n=document.createElement("button");n.textContent="Delete",n.addEventListener("click",(o=>{o.preventDefault(),e.toDos.splice(e.toDos.indexOf(t),1),localStorage.setItem("toDos",JSON.stringify(e.toDos)),i()})),l.appendChild(n)},newProject:()=>{m();const e=document.createElement("button");e.textContent="Submit",e.addEventListener("click",(e=>{e.preventDefault(),t.createProject(document.querySelector("#name").value),i()})),l.appendChild(e);const o=document.createElement("button");o.textContent="Cancel",o.addEventListener("click",(e=>{e.preventDefault(),i()})),l.appendChild(o)},editProject:e=>{m(),document.querySelector("#name").value=e.name;const o=document.createElement("button");o.textContent="Update",o.addEventListener("click",(o=>{o.preventDefault(),t.updateProject(e,document.querySelector("#name").value),i()})),l.appendChild(o);const n=document.createElement("button");n.textContent="Delete",n.addEventListener("click",(o=>{o.preventDefault(),t.projectList.splice(t.projectList.indexOf(e),1),localStorage.setItem("projectList",JSON.stringify(t.projectList)),i()})),l.appendChild(n)}}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFhQyxjQUNoRStDLEdBQVUsSUFFWkQsRUFBUS9CLFlBQVk2QyxFQUFVLEVBdUNqQyxFQTVJeUIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvcy8uL3NyYy90b2Rvcy5qcyIsIndlYnBhY2s6Ly90by1kb3MvLi9zcmMvcHJvamVjdHMuanMiLCJ3ZWJwYWNrOi8vdG8tZG9zLy4vc3JjL2J0bi1hY3Rpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByb2plY3RTdHVmZiB9IGZyb20gXCIuL3Byb2plY3RzXCI7XG5pbXBvcnQgeyBidG5BY3Rpb25zIH0gZnJvbSBcIi4vYnRuLWFjdGlvbnNcIjtcblxuZXhwb3J0IGNvbnN0IHRvRG9TdHVmZiA9ICgoKSA9PiB7XG5sZXQgdG9Eb3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9Eb3NcIikpIHx8IFtdO1xuICBjb25zdCBjcmVhdGVUb2RvID0gKG5hbWUsIGRhdGUsIHByaW9yaXR5LCBwSWQpID0+IHtcbiAgICBsZXQgcHJvamVjdElkID0gcGFyc2VJbnQocElkKTtcbiAgICBsZXQgdG9EbyA9IHtuYW1lLCBkYXRlLCBwcmlvcml0eSwgcHJvamVjdElkLCBpZDpuZXcgRGF0ZSgpLmdldFRpbWUoKX07XG4gICAgdG9Eb3MucHVzaCh0b0RvKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvRG9zXCIsIEpTT04uc3RyaW5naWZ5KHRvRG9zKSk7XG4gICAgcmV0dXJuIHt0b0Rvc307XG4gIH1cblxuXG4gIGNvbnN0IHVwZGF0ZVRvZG8gPSAoY3VycmVudCwgbmFtZSwgZGF0ZSwgcHJpb3JpdHksIHByb2plY3QpID0+IHtcbiAgICBsZXQgcHJvamVjdElkID0gcGFyc2VJbnQocHJvamVjdCk7XG5cbiAgICBjdXJyZW50Lm5hbWUgPSBuYW1lO1xuICAgIGN1cnJlbnQuZGF0ZSA9IGRhdGU7XG4gICAgY3VycmVudC5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgIGN1cnJlbnQucHJvamVjdElkID0gcHJvamVjdElkO1xuICBcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvRG9zXCIsIEpTT04uc3RyaW5naWZ5KHRvRG9zKSk7XG4gIH1cblxuICByZXR1cm4geyBjcmVhdGVUb2RvLCB0b0RvcywgdXBkYXRlVG9kbyB9O1xufSkoKTsiLCJpbXBvcnQgeyBidG5BY3Rpb25zIH0gZnJvbSBcIi4vYnRuLWFjdGlvbnNcIjtcbmltcG9ydCB7IHRvRG9TdHVmZiB9IGZyb20gXCIuL3RvZG9zXCI7XG5cbmV4cG9ydCBjb25zdCBwcm9qZWN0U3R1ZmYgPSAoKCkgPT4ge1xuICAvLyBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgY29uc3QgcHJvamVjdExpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicHJvamVjdExpc3RcIikpIHx8IFt7bmFtZTonUGVyc29uYWwnLCBpZDoxfV07XG4gIFxuICBcbiAgLy9hZGQgcHJvamVjdCB0byBkcm9wLWRvd25cbiAgY29uc3QgcG9wdWxhdGVQcm9qZWN0RHJvcERvd24gPSAoKSA9PiB7XG4gICAgY29uc3QgcHJvamVjdFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0Jyk7XG4gICAgcHJvamVjdFNlbGVjdC5pbm5lckhUTUwgPSBcIlwiO1xuICAgIHByb2plY3RMaXN0LmZvckVhY2goKGUpID0+IHtcbiAgICAgIGNvbnN0IHByb2plY3RPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgIHByb2plY3RPcHRpb24udmFsdWUgPSBlLmlkO1xuICAgICAgcHJvamVjdE9wdGlvbi5zZXRBdHRyaWJ1dGUoJ2RhdGFzZXQnLCBlLmlkKTtcbiAgICAgIHByb2plY3RPcHRpb24uY2xhc3NMaXN0LmFkZCgncHJvamVjdC1vcHRpb24nKTtcbiAgICAgIHByb2plY3RPcHRpb24udGV4dENvbnRlbnQgPSBlLm5hbWU7XG4gICAgICBwcm9qZWN0U2VsZWN0LmFwcGVuZENoaWxkKHByb2plY3RPcHRpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgLy9zaG93IHByb2plY3QgbmFtZSBvbiBwYWdlXG4gIGNvbnN0IGRpc3BsYXlQcm9qZWN0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1jb250YWluZXInKTtcbiAgICBwcm9qZWN0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gIFxuICAgIHByb2plY3RMaXN0LmZvckVhY2goKGUpID0+IHtcbiAgICAgIGNvbnN0IHByb2plY3REaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIC8vIHByb2plY3REaXYuZGF0YXNldC5wcm9qZWN0ID0gZS5yZXBsYWNlKC9cXHMrL2csICctJykudG9Mb3dlckNhc2UoKTtcbiAgICAgIHByb2plY3REaXYuY2xhc3NOYW1lID0gXCJwcm9qZWN0LWRpdlwiO1xuICAgICAgY29uc3QgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgcHJvamVjdE5hbWUuY2xhc3NMaXN0LmFkZCgncHJvamVjdC1uYW1lJyk7XG4gICAgICBjb25zdCBlZGl0SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIGVkaXRJY29uLmNsYXNzTGlzdC5hZGQgKCdtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkJywgJ2VkaXQnKTtcbiAgICAgIGVkaXRJY29uLnRleHRDb250ZW50ID0gJ2VkaXQnO1xuICAgICAgZWRpdEljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGJ0bkFjdGlvbnMuc2hvd0Zvcm0oYEVkaXQgUHJvamVjdCBOYW1lYCk7XG4gICAgICAgIGJ0bkFjdGlvbnMuZWRpdFByb2plY3QoZSk7XG4gICAgICB9LCB7b25jZTogdHJ1ZX0pO1xuXG4gICAgICAvL3RvZG8gYnV0dG9uXG4gICAgICBjb25zdCBuZXdUb2RvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICBuZXdUb2RvLmNsYXNzTGlzdC5hZGQoJ2FkZC10b2RvJywgJ3Byb2plY3QtaWNvbicpO1xuICAgICAgXG4gICAgICBjb25zdCBidXR0b25UZXh0VG9kbyA9ICdBZGQgVG8gRG8nXG4gICAgICBjb25zdCBuZXdJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgbmV3SWNvbi5jbGFzc0xpc3QuYWRkICgnbWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCcsICdlZGl0Jyk7XG4gICAgICBuZXdJY29uLnRleHRDb250ZW50ID0gJ2FkZCc7XG5cbiAgICAgIG5ld1RvZG8uYXBwZW5kKG5ld0ljb24sIGJ1dHRvblRleHRUb2RvKTtcbiAgICAgIG5ld1RvZG8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGJ0bkFjdGlvbnMuc2hvd0Zvcm0oJ0NyZWF0ZSBOZXcgSXRlbScpXG4gICAgICAgIGJ0bkFjdGlvbnMubmV3VG9EbyhlKTtcbiAgICAgIH0sIHtvbmNlOiB0cnVlfSk7XG5cbiAgICAgIHByb2plY3ROYW1lLnRleHRDb250ZW50ID0gZS5uYW1lO1xuICAgICAgcHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0RGl2KTtcbiAgICAgIHByb2plY3REaXYuYXBwZW5kQ2hpbGQocHJvamVjdE5hbWUpO1xuICAgICAgcHJvamVjdE5hbWUuYXBwZW5kQ2hpbGQoZWRpdEljb24pO1xuICAgICAgcHJvamVjdERpdi5hcHBlbmRDaGlsZChuZXdUb2RvKTtcblxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0TGlzdFwiLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0TGlzdCkpO1xuICAgICAgXG4gICAgICB0b0RvU3R1ZmYudG9Eb3MuZm9yRWFjaCgodCkgPT4ge1xuICAgICAgICBcbiAgICAgICAgaWYgKHQucHJvamVjdElkID09PSBlLmlkKSB7XG4gICAgICAgICAgY29uc3QgdG9Eb0l0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICB0b0RvSXRlbS5jbGFzc0xpc3QuYWRkKCd0by1kby1pdGVtJyk7XG4gICAgICAgICAgdG9Eb0l0ZW0uc2V0QXR0cmlidXRlKCdpZCcsIHQuaWQpO1xuICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKVxuICAgICAgICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcbiAgICAgICAgICBjb25zdCB0b0RvTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICB0b0RvTmFtZS50ZXh0Q29udGVudCA9IHQubmFtZTtcbiAgICAgICAgICBjb25zdCB0b0RvUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgdG9Eb1ByaW9yaXR5LnRleHRDb250ZW50ID0gdC5wcmlvcml0eTtcbiAgICAgICAgICBjb25zdCB0b0RvRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICB0b0RvRGF0ZS50ZXh0Q29udGVudCA9IHQuZGF0ZTtcbiAgICAgICAgICBjb25zdCBlZGl0SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICBlZGl0SWNvbi5jbGFzc0xpc3QuYWRkICgnbWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCcsICdlZGl0Jyk7XG4gICAgICAgICAgZWRpdEljb24udGV4dENvbnRlbnQgPSAnZWRpdCc7XG4gICAgICAgICAgZWRpdEljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBidG5BY3Rpb25zLnNob3dGb3JtKCdFZGl0IFRvIERvJylcbiAgICAgICAgICAgIGJ0bkFjdGlvbnMuZWRpdFRvRG8odCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBwcm9qZWN0RGl2LmFwcGVuZENoaWxkKHRvRG9JdGVtKTtcbiAgICAgICAgICB0b0RvSXRlbS5hcHBlbmQoY2hlY2tib3gsIHRvRG9OYW1lLCB0b0RvUHJpb3JpdHksIHRvRG9EYXRlLCBlZGl0SWNvbik7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICB9KVxuXG4gICAgLy9uZXcgcHJvamVjdCBidXR0b25cbiAgICBjb25zdCBuZXdQcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgbmV3UHJvamVjdC5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWljb24nKTtcbiAgICBcbiAgICBjb25zdCBidXR0b25UZXh0ID0gJ0NyZWF0ZSBOZXcgTGlzdCdcbiAgICBjb25zdCBuZXdJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIG5ld0ljb24uY2xhc3NMaXN0LmFkZCAoJ21hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQnLCAnZWRpdCcpO1xuICAgIG5ld0ljb24udGV4dENvbnRlbnQgPSAnYWRkJztcblxuICAgIG5ld1Byb2plY3QuYXBwZW5kKG5ld0ljb24sIGJ1dHRvblRleHQpO1xuICAgIHByb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQobmV3UHJvamVjdCk7XG4gICAgbmV3UHJvamVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGJ0bkFjdGlvbnMuc2hvd0Zvcm0oJ0NyZWF0ZSBOZXcgTGlzdCcpO1xuICAgICAgYnRuQWN0aW9ucy5uZXdQcm9qZWN0KCk7XG4gICAgfSk7XG4gICAgXG4gIH1cblxuICBjb25zdCByZWZyZXNoRXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYW5jZWwtYnRuXCIpO1xuICAgIGNhbmNlbEJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBidG5BY3Rpb25zLmRlbGV0ZVByb2plY3QoZSwgY3VycmVudCksIHtvbmNlOiB0cnVlfSk7XG4gICAgXG4gIH1cblxuXG4gIC8vcHJvamVjdCBmYWN0b3J5IGZ1bmN0aW9uXG4gIGNvbnN0IGNyZWF0ZVByb2plY3QgPSAobmFtZSkgPT4ge1xuICAgIGNvbnN0IHByb2plY3QgPSB7bmFtZSwgaWQ6bmV3IERhdGUoKS5nZXRUaW1lKCl9XG4gICAgcHJvamVjdExpc3QucHVzaChwcm9qZWN0KTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RMaXN0XCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RMaXN0KSk7XG5cbiAgICBwb3B1bGF0ZVByb2plY3REcm9wRG93bigpO1xuICB9XG5cbiAgY29uc3QgdXBkYXRlUHJvamVjdCA9IChjdXJyZW50LCBuZXdOYW1lKSA9PiB7XG4gICAgY3VycmVudC5uYW1lID0gbmV3TmFtZTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RMaXN0XCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RMaXN0KSk7XG4gICAgcG9wdWxhdGVQcm9qZWN0RHJvcERvd24oKTtcbiAgfVxuICAgICAgXG4gIGRpc3BsYXlQcm9qZWN0KCk7XG4gIHBvcHVsYXRlUHJvamVjdERyb3BEb3duKCk7XG4gIFxuICByZXR1cm4ge2NyZWF0ZVByb2plY3QsIHByb2plY3RMaXN0LCB1cGRhdGVQcm9qZWN0LCBkaXNwbGF5UHJvamVjdH1cbn0pKCk7IiwiaW1wb3J0IHsgcHJvamVjdFN0dWZmIH0gZnJvbSBcIi4vcHJvamVjdHNcIjtcbmltcG9ydCB7IHRvRG9TdHVmZiB9IGZyb20gXCIuL3RvZG9zXCI7XG5cbmV4cG9ydCBjb25zdCBidG5BY3Rpb25zID0gKCgpID0+IHtcbiAgY29uc3QgdG9kb0ljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRvZG8nKTtcbiAgY29uc3QgZm9ybU1lc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybS1tZXNzYWdlJyk7XG4gIGNvbnN0IGZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1jb250YWluZXInKTtcbiAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWNvbnRhaW5lcicpO1xuICBcbiAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRlJyk7XG4gIGNvbnN0IHByaW9yaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByaW9yaXR5Jyk7XG4gIGNvbnN0IHByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1zZWxlY3QnKTtcbiAgY29uc3QgYnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25zJyk7XG5cbiAgY29uc3QgbmV3VG9EbyA9IChwcm9qZWN0KSA9PiB7XG4gICAgc2hvd0Zvcm1JbnB1dHMoKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdCcpLnZhbHVlID0gcHJvamVjdC5pZDtcblxuICAgIGNvbnN0IHN1YkJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHN1YkJ0bi50ZXh0Q29udGVudCA9IFwiU3VibWl0XCI7XG4gICAgc3ViQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRvRG9TdHVmZi5jcmVhdGVUb2RvKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpLnZhbHVlLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdCcpLnZhbHVlKTtcbiAgICAgIGhpZGVGb3JtKCk7XG4gICAgfSlcbiAgICBidXR0b25zLmFwcGVuZENoaWxkKHN1YkJ0bik7XG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBjYW5jZWxCdG4udGV4dENvbnRlbnQgPSBcIkNhbmNlbFwiXG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGhpZGVGb3JtKCk7XG4gICAgfSk7XG4gICAgYnV0dG9ucy5hcHBlbmRDaGlsZChjYW5jZWxCdG4pO1xuICB9IFxuICBcbiAgY29uc3QgZWRpdFRvRG8gPSAoY3VycmVudCkgPT4geyBcbiAgICBzaG93Rm9ybUlucHV0cygpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUgPSBjdXJyZW50Lm5hbWU7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKS52YWx1ZSA9IGN1cnJlbnQuZGF0ZTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKS52YWx1ZSA9IGN1cnJlbnQucHJpb3JpdHk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QnKS52YWx1ZSA9IGN1cnJlbnQucHJvamVjdElkO1xuXG4gICAgY29uc3Qgc3ViQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgc3ViQnRuLnRleHRDb250ZW50ID0gXCJVcGRhdGVcIjtcbiAgICBzdWJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdG9Eb1N0dWZmLnVwZGF0ZVRvZG8oY3VycmVudCwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKS52YWx1ZSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKS52YWx1ZSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaW9yaXR5JykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0JykudmFsdWUpO1xuICAgICAgaGlkZUZvcm0oKTtcbiAgICB9KTtcbiAgICBidXR0b25zLmFwcGVuZENoaWxkKHN1YkJ0bik7XG5cbiAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiXG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRvRG9TdHVmZi50b0Rvcy5zcGxpY2UodG9Eb1N0dWZmLnRvRG9zLmluZGV4T2YoY3VycmVudCksIDEpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b0Rvc1wiLCBKU09OLnN0cmluZ2lmeSh0b0RvU3R1ZmYudG9Eb3MpKTtcbiAgICAgIGhpZGVGb3JtKCk7XG4gICAgfSk7XG4gICAgYnV0dG9ucy5hcHBlbmRDaGlsZChkZWxldGVCdG4pO1xuICB9IFxuXG4gIGNvbnN0IG5ld1Byb2plY3QgPSAoKSA9PiB7XG4gICAgaGlkZUZvcm1JbnB1dHMoKTtcbiAgICBjb25zdCBzdWJCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBzdWJCdG4udGV4dENvbnRlbnQgPSBcIlN1Ym1pdFwiO1xuICAgIHN1YkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBwcm9qZWN0U3R1ZmYuY3JlYXRlUHJvamVjdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpLnZhbHVlKTtcbiAgICAgIGhpZGVGb3JtKCk7XG4gICAgfSlcbiAgICBidXR0b25zLmFwcGVuZENoaWxkKHN1YkJ0bilcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGNhbmNlbEJ0bi50ZXh0Q29udGVudCA9IFwiQ2FuY2VsXCJcbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaGlkZUZvcm0oKTtcbiAgICB9KTtcbiAgICBidXR0b25zLmFwcGVuZENoaWxkKGNhbmNlbEJ0bik7XG4gIH0gXG5cbiAgY29uc3QgZWRpdFByb2plY3QgPSAoY3VycmVudCkgPT4geyBcbiAgICBoaWRlRm9ybUlucHV0cygpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUgPSBjdXJyZW50Lm5hbWU7XG4gICAgXG4gICAgY29uc3Qgc3ViQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgc3ViQnRuLnRleHRDb250ZW50ID0gXCJVcGRhdGVcIjtcbiAgICBzdWJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcHJvamVjdFN0dWZmLnVwZGF0ZVByb2plY3QoY3VycmVudCwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKS52YWx1ZSk7XG4gICAgICBoaWRlRm9ybSgpO1xuICAgIH0pO1xuICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoc3ViQnRuKTtcbiAgICBcbiAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiXG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHByb2plY3RTdHVmZi5wcm9qZWN0TGlzdC5zcGxpY2UocHJvamVjdFN0dWZmLnByb2plY3RMaXN0LmluZGV4T2YoY3VycmVudCksIDEpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0TGlzdFwiLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0U3R1ZmYucHJvamVjdExpc3QpKTtcbiAgICAgIGhpZGVGb3JtKCk7XG4gICAgfSk7XG4gICAgYnV0dG9ucy5hcHBlbmRDaGlsZChkZWxldGVCdG4pO1xuICB9XG4gIFxuICBjb25zdCBzaG93Rm9ybSA9IChtc2cpID0+IHtcbiAgICBidXR0b25zLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAvL3Jlc2V0IHByaW9yaXR5IGFuZCBwcm9qZWN0XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaW9yaXR5Jykuc2VsZWN0ZWRJbmRleCA9IDA7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QnKS5zZWxlY3RlZEluZGV4ID0gMDtcbiAgICAvLyByZXNldCBpbnB1dHNcbiAgICBsZXQgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaW5wdXRzW2ldLnZhbHVlID0gXCJcIjtcbiAgICB9XG4gICAgcHJvamVjdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBmb3JtTWVzc2FnZS50ZXh0Q29udGVudCA9IG1zZztcbiAgICBmb3JtQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICB9IFxuXG4gIGNvbnN0IGhpZGVGb3JtID0gKCkgPT4ge1xuICAgIHRvZG9JY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIGZvcm1NZXNzYWdlLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBmb3JtQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIHByb2plY3RDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgcHJvamVjdFN0dWZmLmRpc3BsYXlQcm9qZWN0KCk7XG4gIH1cblxuICBjb25zdCBzaG93Rm9ybUlucHV0cyA9ICgpID0+IHtcbiAgICBkYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIHByaW9yaXR5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIHByb2plY3QuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gIH1cblxuICBjb25zdCBoaWRlRm9ybUlucHV0cyA9ICgpID0+IHtcbiAgICBkYXRlLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIHByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIHByb2plY3QuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gIH1cblxuICByZXR1cm4ge3Nob3dGb3JtLCBoaWRlRm9ybSwgbmV3VG9EbywgZWRpdFRvRG8sIG5ld1Byb2plY3QsIGVkaXRQcm9qZWN0fVxufSkoKTtcblxuICAiXSwibmFtZXMiOlsidG9Eb1N0dWZmIiwidG9Eb3MiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiY3JlYXRlVG9kbyIsIm5hbWUiLCJkYXRlIiwicHJpb3JpdHkiLCJwSWQiLCJ0b0RvIiwicHJvamVjdElkIiwicGFyc2VJbnQiLCJpZCIsIkRhdGUiLCJnZXRUaW1lIiwicHVzaCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJ1cGRhdGVUb2RvIiwiY3VycmVudCIsInByb2plY3QiLCJwcm9qZWN0U3R1ZmYiLCJwcm9qZWN0TGlzdCIsInBvcHVsYXRlUHJvamVjdERyb3BEb3duIiwicHJvamVjdFNlbGVjdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJmb3JFYWNoIiwiZSIsInByb2plY3RPcHRpb24iLCJjcmVhdGVFbGVtZW50IiwidmFsdWUiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwiZGlzcGxheVByb2plY3QiLCJwcm9qZWN0Q29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsInByb2plY3REaXYiLCJjbGFzc05hbWUiLCJwcm9qZWN0TmFtZSIsImVkaXRJY29uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJ0bkFjdGlvbnMiLCJzaG93Rm9ybSIsImVkaXRQcm9qZWN0Iiwib25jZSIsIm5ld1RvZG8iLCJuZXdJY29uIiwiYXBwZW5kIiwibmV3VG9EbyIsInQiLCJ0b0RvSXRlbSIsImNoZWNrYm94IiwidG9Eb05hbWUiLCJ0b0RvUHJpb3JpdHkiLCJ0b0RvRGF0ZSIsImVkaXRUb0RvIiwibmV3UHJvamVjdCIsImNyZWF0ZVByb2plY3QiLCJ1cGRhdGVQcm9qZWN0IiwibmV3TmFtZSIsInRvZG9JY29uIiwiZm9ybU1lc3NhZ2UiLCJmb3JtQ29udGFpbmVyIiwiYnV0dG9ucyIsImhpZGVGb3JtIiwicmVtb3ZlIiwic2hvd0Zvcm1JbnB1dHMiLCJoaWRlRm9ybUlucHV0cyIsIm1zZyIsInNlbGVjdGVkSW5kZXgiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaSIsImxlbmd0aCIsInN1YkJ0biIsInByZXZlbnREZWZhdWx0IiwiY2FuY2VsQnRuIiwiZGVsZXRlQnRuIiwic3BsaWNlIiwiaW5kZXhPZiJdLCJzb3VyY2VSb290IjoiIn0=