(()=>{"use strict";const e=(()=>{let e=JSON.parse(localStorage.getItem("toDos"))||[];return{createTodo:(o,n,c,r)=>{let d={name:o,date:n,priority:c,projectName:r};return e.push(d),localStorage.setItem("toDos",JSON.stringify(e)),t.displayProject(),{toDos:e}},attachToProject:(e,o)=>{t.projectList.forEach((t=>{if(o===t){let t;t.push(e),console.log(t)}})),t.projectList.forEach((o=>{t.createProject.e.push(e),console.log(t.createProject.projectArray)}))},toDos:e,updateTodo:(o,n,c,r,d)=>{let a=e.map((function(e){return e.name})).indexOf(o);e[a].name=n,e[a].date=c,e[a].priority=r,e[a].projectName=d,localStorage.setItem("toDos",JSON.stringify(e)),t.displayProject()}}})(),t=(()=>{const t=JSON.parse(localStorage.getItem("projectList"))||["Personal"],n=()=>{const e=document.getElementById("project");e.innerHTML="",t.forEach((t=>{const o=document.createElement("option");o.setAttribute("value",t),o.classList.add("project-option"),o.textContent=t,e.appendChild(o)}))},c=()=>{const n=document.querySelector(".project-container");n.innerHTML="",t.forEach((c=>{const a=c.replace(/\s+/g,"-").toLowerCase(),s=document.createElement("div");s.className=a,s.className="project-div";const l=document.createElement("h2");l.classList.add("project-name");const i=document.createElement("span");i.classList.add("material-symbols-outlined","edit"),i.textContent="edit",i.addEventListener("click",(()=>{r("Edit Project Name","edit project",c)}));const u=document.createElement("button");u.classList.add("add-todo","project-button");const m=document.createElement("span");m.classList.add("material-symbols-outlined","edit"),m.textContent="add",u.append(m,"Add To Do"),u.addEventListener("click",(()=>{o.showForm("Create New Item","todo")})),l.textContent=c,n.appendChild(s),s.appendChild(l),l.appendChild(i),s.appendChild(u),localStorage.setItem("projectList",JSON.stringify(t)),e.toDos.forEach((e=>{if(e.projectName===c){const t=document.createElement("div");t.classList.add("to-do-item");const o=document.createElement("span");o.textContent=e.name;const n=document.createElement("span");n.textContent=e.priority;const c=document.createElement("span");c.textContent=e.date;const r=document.createElement("span");r.classList.add("material-symbols-outlined","edit"),r.textContent="edit",r.addEventListener("click",(()=>{d("Edit To Do","edit todo",e)})),s.appendChild(t),t.append(o,n,c,r)}}))}));const c=document.createElement("button");c.classList.add("project-button");const a=document.createElement("span");a.classList.add("material-symbols-outlined","edit"),a.textContent="add",c.append(a,"Create New List"),n.appendChild(c),c.addEventListener("click",(()=>{o.showForm("Create New List","project")}))},r=(e,t,n)=>{document.querySelector("#name").value=n,o.showForm(e,t,n)},d=(e,t,n)=>{document.querySelector("#name").value=n.name,document.querySelector("#date").value=n.date,document.querySelector("#priority").value=n.priority,document.querySelector("#project").value=n.projectName,o.showForm(e,t,n.name)};return c(),n(),{createProject:e=>{t.push(e),localStorage.setItem("projectList",JSON.stringify(t)),n(),c()},projectList:t,updateProject:(e,o)=>{console.log(e,o);let r=t.indexOf(e);t[r]=o,localStorage.setItem("projectList",JSON.stringify(t)),c(),n()},displayProject:c}})(),o=(()=>{const o=document.querySelector(".add-todo"),n=document.querySelector("#form-message"),c=document.querySelector(".form-container"),r=document.querySelector(".project-container"),d=document.querySelector(".date"),a=document.querySelector(".priority"),s=document.querySelector(".project-select"),l=document.querySelector(".submit-btn"),i=document.querySelector(".cancel-btn"),u=(d,a,s)=>{o.classList.add("hidden"),r.classList.add("hidden"),n.textContent=d,c.classList.remove("hidden"),l.textContent="Submit",i.textContent="Cancel","todo"===a&&(m(),l.addEventListener("click",(t=>{t.preventDefault(),e.createTodo(document.querySelector("#name").value,document.querySelector("#date").value,document.querySelector("#priority").value,document.querySelector("#project").value),y("todo")}),{once:!0})),"edit todo"===a&&(m(),l.textContent="Update",l.addEventListener("click",(t=>{t.preventDefault(),e.updateTodo(s,document.querySelector("#name").value,document.querySelector("#date").value,document.querySelector("#priority").value,document.querySelector("#project").value),y()}),{once:!0}),i.textContent="Delete",i.addEventListener("click",(o=>{o.preventDefault();let n=e.toDos.map((function(e){return e.name})).indexOf(s);e.toDos.splice(n,1),localStorage.setItem("toDos",JSON.stringify(e.toDos)),t.displayProject(),y()}),{once:!0})),"project"===a&&(p(),l.addEventListener("click",(e=>{e.preventDefault(),t.createProject(document.querySelector("#name").value),y()}),{once:!0})),"edit project"===a&&(p(),l.textContent="Update",l.addEventListener("click",(e=>{e.preventDefault(),t.updateProject(s,document.querySelector("#name").value),y()}),{once:!0}),i.textContent="Delete",i.addEventListener("click",(e=>{e.preventDefault();let o=t.projectList.map((function(e){return e.name})).indexOf(s);t.projectList.splice(o,1),localStorage.setItem("projectList",JSON.stringify(t.projectList)),t.displayProject(),y()}),{once:!0}))},m=()=>{d.classList.remove("hidden"),a.classList.remove("hidden"),s.classList.remove("hidden")},p=()=>{d.classList.add("hidden"),a.classList.add("hidden"),s.classList.add("hidden")},y=()=>{o.classList.remove("hidden"),n.textContent="",c.classList.add("hidden"),r.classList.remove("hidden"),document.querySelector("#priority").selectedIndex=0,document.querySelector("#project").selectedIndex=0;let e=document.querySelectorAll("input");for(let t=0;t<e.length;t++)e[t].value=""};return o.addEventListener("click",(()=>{u("Add To-do","todo")})),{showForm:u,hideForm:y}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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V0FBVXVCLFdBQ25CLEVBaEh5QixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG8tZG9zLy4vc3JjL3RvZG9zLmpzIiwid2VicGFjazovL3RvLWRvcy8uL3NyYy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly90by1kb3MvLi9zcmMvYnRuLWFjdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJvamVjdFN0dWZmIH0gZnJvbSBcIi4vcHJvamVjdHNcIjtcbmltcG9ydCB7IGJ0bkFjdGlvbnMgfSBmcm9tIFwiLi9idG4tYWN0aW9uc1wiO1xuXG5leHBvcnQgY29uc3QgdG9Eb1N0dWZmID0gKCgpID0+IHtcbmxldCB0b0RvcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0b0Rvc1wiKSkgfHwgW107XG4gIGNvbnN0IGNyZWF0ZVRvZG8gPSAobmFtZSwgZGF0ZSwgcHJpb3JpdHksIHByb2plY3ROYW1lKSA9PiB7XG4gICBcbiAgICBsZXQgdG9EbyA9IHtuYW1lLCBkYXRlLCBwcmlvcml0eSwgcHJvamVjdE5hbWV9O1xuICAgIHRvRG9zLnB1c2godG9Ebyk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b0Rvc1wiLCBKU09OLnN0cmluZ2lmeSh0b0RvcykpO1xuICAgIHByb2plY3RTdHVmZi5kaXNwbGF5UHJvamVjdCgpO1xuICAgIC8vIGF0dGFjaFRvUHJvamVjdCh0b0RvLCBwcm9qZWN0TmFtZSk7XG5cbiAgICByZXR1cm4ge3RvRG9zfTtcbiAgfVxuXG4gIGNvbnN0IGF0dGFjaFRvUHJvamVjdCA9ICh0b0RvLCBwcm9qZWN0TmFtZSkgPT4ge1xuICAgIHByb2plY3RTdHVmZi5wcm9qZWN0TGlzdC5mb3JFYWNoKChlKSA9PiB7XG4gICAgICBpZiAocHJvamVjdE5hbWUgPT09IGUpIHtcbiAgICAgICAgbGV0IHByb2plY3RBcnJheTtcbiAgICAgICAgcHJvamVjdEFycmF5LnB1c2godG9Ebyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RBcnJheSk7XG4gICAgICAgIC8vIGNvbnN0IGNsYXNzTmFtZSA9IGUucmVwbGFjZSgvXFxzKy9nLCAnLScpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNsYXNzTmFtZSlcbiAgICAgICAgLy8gY29uc3QgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtjbGFzc05hbWV9YCk7XG4gICAgICAgIC8vIGNvbnN0IHRvRG9JdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAvLyB0b0RvSXRlbS50ZXh0Q29udGVudCA9IHRvRG8ubmFtZTtcblxuICAgICAgICAvLyBwcm9qZWN0TmFtZS5hcHBlbmRDaGlsZCh0b0RvSXRlbSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGUsIHByb2plY3ROYW1lKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBwcm9qZWN0U3R1ZmYucHJvamVjdExpc3QuZm9yRWFjaCgoZSkgPT4ge1xuICAgICAgaWYgKHByb2plY3ROYW1lID09PSBlKTtcbiAgICAgIHByb2plY3RTdHVmZi5jcmVhdGVQcm9qZWN0LmUucHVzaCh0b0RvKTtcbiAgICAgICAgLy8gZS5wdXNoKHRvRG8pO1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0U3R1ZmYuY3JlYXRlUHJvamVjdC5wcm9qZWN0QXJyYXkpO1xuICAgIH0pXG4gIFxuICB9XG5cbiAgY29uc3QgdXBkYXRlVG9kbyA9IChjdXJyZW50LCBuYW1lLCBkYXRlLCBwcmlvcml0eSwgcHJvamVjdCkgPT4ge1xuICAgICAgbGV0IGluZGV4ID0gdG9Eb3MubWFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGUubmFtZTtcbiAgICAgIH0pLmluZGV4T2YoY3VycmVudCk7XG4gICAgICAgIHRvRG9zW2luZGV4XS5uYW1lID0gbmFtZTtcbiAgICAgICAgdG9Eb3NbaW5kZXhdLmRhdGUgPSBkYXRlO1xuICAgICAgICB0b0Rvc1tpbmRleF0ucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgdG9Eb3NbaW5kZXhdLnByb2plY3ROYW1lID0gcHJvamVjdDtcbiAgXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b0Rvc1wiLCBKU09OLnN0cmluZ2lmeSh0b0RvcykpO1xuICAgIHByb2plY3RTdHVmZi5kaXNwbGF5UHJvamVjdCgpO1xuICB9XG5cbiAgcmV0dXJuIHsgY3JlYXRlVG9kbywgYXR0YWNoVG9Qcm9qZWN0LCB0b0RvcywgdXBkYXRlVG9kbyB9O1xufSkoKTsiLCJpbXBvcnQgeyBidG5BY3Rpb25zIH0gZnJvbSBcIi4vYnRuLWFjdGlvbnNcIjtcbmltcG9ydCB7IHRvRG9TdHVmZiB9IGZyb20gXCIuL3RvZG9zXCI7XG5cbmV4cG9ydCBjb25zdCBwcm9qZWN0U3R1ZmYgPSAoKCkgPT4ge1xuICAvLyBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgY29uc3QgcHJvamVjdExpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicHJvamVjdExpc3RcIikpIHx8IFsnUGVyc29uYWwnXTtcbiAgXG4gIFxuICAvL2FkZCBwcm9qZWN0IHRvIGRyb3AtZG93blxuICBjb25zdCBwb3B1bGF0ZVByb2plY3REcm9wRG93biA9ICgpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3QnKTtcbiAgICBwcm9qZWN0U2VsZWN0LmlubmVySFRNTCA9IFwiXCI7XG4gICAgcHJvamVjdExpc3QuZm9yRWFjaCgoZSkgPT4ge1xuICAgICAgY29uc3QgcHJvamVjdE9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgcHJvamVjdE9wdGlvbi5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgZSk7XG4gICAgICBwcm9qZWN0T3B0aW9uLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3Qtb3B0aW9uJyk7XG4gICAgICBwcm9qZWN0T3B0aW9uLnRleHRDb250ZW50ID0gZTtcbiAgICAgIHByb2plY3RTZWxlY3QuYXBwZW5kQ2hpbGQocHJvamVjdE9wdGlvbik7XG4gICAgfSk7XG4gIH1cblxuICAvL3Nob3cgcHJvamVjdCBuYW1lIG9uIHBhZ2VcbiAgY29uc3QgZGlzcGxheVByb2plY3QgPSAoKSA9PiB7XG4gICAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWNvbnRhaW5lcicpO1xuICAgIHByb2plY3RDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICBwcm9qZWN0TGlzdC5mb3JFYWNoKChlKSA9PiB7XG4gICAgICBjb25zdCBjbGFzc05hbWUgPSBlLnJlcGxhY2UoL1xccysvZywgJy0nKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgcHJvamVjdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgcHJvamVjdERpdi5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgICBwcm9qZWN0RGl2LmNsYXNzTmFtZSA9IFwicHJvamVjdC1kaXZcIjtcbiAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgICAgIHByb2plY3ROYW1lLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtbmFtZScpO1xuICAgICAgY29uc3QgZWRpdEljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBlZGl0SWNvbi5jbGFzc0xpc3QuYWRkICgnbWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCcsICdlZGl0Jyk7XG4gICAgICBlZGl0SWNvbi50ZXh0Q29udGVudCA9ICdlZGl0JztcbiAgICAgIGVkaXRJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBlZGl0QWN0aW9uKGBFZGl0IFByb2plY3QgTmFtZWAsICdlZGl0IHByb2plY3QnLCBlKVxuICAgICAgfSk7XG5cbiAgICAgIC8vdG9kbyBidXR0b25cbiAgICAgIGNvbnN0IG5ld1RvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgIG5ld1RvZG8uY2xhc3NMaXN0LmFkZCgnYWRkLXRvZG8nLCAncHJvamVjdC1idXR0b24nKTtcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uVGV4dFRvZG8gPSAnQWRkIFRvIERvJ1xuICAgICAgY29uc3QgbmV3SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIG5ld0ljb24uY2xhc3NMaXN0LmFkZCAoJ21hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQnLCAnZWRpdCcpO1xuICAgICAgbmV3SWNvbi50ZXh0Q29udGVudCA9ICdhZGQnO1xuXG4gICAgICBuZXdUb2RvLmFwcGVuZChuZXdJY29uLCBidXR0b25UZXh0VG9kbyk7XG4gICAgICBuZXdUb2RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBidG5BY3Rpb25zLnNob3dGb3JtKCdDcmVhdGUgTmV3IEl0ZW0nLCAndG9kbycpO1xuICAgICAgfSk7XG5cbiAgICAgIHByb2plY3ROYW1lLnRleHRDb250ZW50ID0gZTtcbiAgICAgIHByb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdERpdik7XG4gICAgICBwcm9qZWN0RGl2LmFwcGVuZENoaWxkKHByb2plY3ROYW1lKTtcbiAgICAgIHByb2plY3ROYW1lLmFwcGVuZENoaWxkKGVkaXRJY29uKTtcbiAgICAgIHByb2plY3REaXYuYXBwZW5kQ2hpbGQobmV3VG9kbyk7XG5cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdExpc3RcIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdExpc3QpKTtcbiAgICAgIFxuICAgICAgdG9Eb1N0dWZmLnRvRG9zLmZvckVhY2goKHQpID0+IHtcbiAgICAgICAgaWYgKHQucHJvamVjdE5hbWUgPT09IGUpIHtcbiAgICAgICAgICBjb25zdCB0b0RvSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIHRvRG9JdGVtLmNsYXNzTGlzdC5hZGQoJ3RvLWRvLWl0ZW0nKTtcbiAgICAgICAgICBjb25zdCB0b0RvTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICB0b0RvTmFtZS50ZXh0Q29udGVudCA9IHQubmFtZTtcbiAgICAgICAgICBjb25zdCB0b0RvUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgdG9Eb1ByaW9yaXR5LnRleHRDb250ZW50ID0gdC5wcmlvcml0eTtcbiAgICAgICAgICBjb25zdCB0b0RvRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICB0b0RvRGF0ZS50ZXh0Q29udGVudCA9IHQuZGF0ZTtcbiAgICAgICAgICBjb25zdCBlZGl0SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICBlZGl0SWNvbi5jbGFzc0xpc3QuYWRkICgnbWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCcsICdlZGl0Jyk7XG4gICAgICAgICAgZWRpdEljb24udGV4dENvbnRlbnQgPSAnZWRpdCc7XG4gICAgICAgICAgZWRpdEljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBlZGl0VG9kb0FjdGlvbihgRWRpdCBUbyBEb2AsICdlZGl0IHRvZG8nLCB0KVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcHJvamVjdERpdi5hcHBlbmRDaGlsZCh0b0RvSXRlbSk7XG4gICAgICAgICAgdG9Eb0l0ZW0uYXBwZW5kKHRvRG9OYW1lLCB0b0RvUHJpb3JpdHksIHRvRG9EYXRlLCBlZGl0SWNvbik7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcblxuICAgIC8vbmV3IHByb2plY3QgYnV0dG9uXG4gICAgY29uc3QgbmV3UHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIG5ld1Byb2plY3QuY2xhc3NMaXN0LmFkZCgncHJvamVjdC1idXR0b24nKTtcbiAgICBcbiAgICBjb25zdCBidXR0b25UZXh0ID0gJ0NyZWF0ZSBOZXcgTGlzdCdcbiAgICBjb25zdCBuZXdJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIG5ld0ljb24uY2xhc3NMaXN0LmFkZCAoJ21hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQnLCAnZWRpdCcpO1xuICAgIG5ld0ljb24udGV4dENvbnRlbnQgPSAnYWRkJztcblxuICAgIG5ld1Byb2plY3QuYXBwZW5kKG5ld0ljb24sIGJ1dHRvblRleHQpO1xuICAgIHByb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQobmV3UHJvamVjdCk7XG4gICAgbmV3UHJvamVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGJ0bkFjdGlvbnMuc2hvd0Zvcm0oJ0NyZWF0ZSBOZXcgTGlzdCcsICdwcm9qZWN0Jyk7XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBlZGl0QWN0aW9uID0gKG1zZywgdHlwZSwgbmFtZSkgPT4ge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUgPSBuYW1lO1xuICAgIGJ0bkFjdGlvbnMuc2hvd0Zvcm0obXNnLCB0eXBlLCBuYW1lKTtcbiAgfVxuXG4gIGNvbnN0IGVkaXRUb2RvQWN0aW9uID0gKG1zZywgdHlwZSwgdG9kbykgPT4ge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUgPSB0b2RvLm5hbWU7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKS52YWx1ZSA9IHRvZG8uZGF0ZTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKS52YWx1ZSA9IHRvZG8ucHJpb3JpdHk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QnKS52YWx1ZSA9IHRvZG8ucHJvamVjdE5hbWU7XG4gICAgYnRuQWN0aW9ucy5zaG93Rm9ybShtc2csIHR5cGUsIHRvZG8ubmFtZSk7XG4gIH1cblxuICAvL3Byb2plY3QgZmFjdG9yeSBmdW5jdGlvblxuICBjb25zdCBjcmVhdGVQcm9qZWN0ID0gKG5hbWUpID0+IHtcbiAgICBwcm9qZWN0TGlzdC5wdXNoKG5hbWUpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdExpc3RcIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdExpc3QpKTtcblxuICAgIHBvcHVsYXRlUHJvamVjdERyb3BEb3duKCk7XG4gICAgZGlzcGxheVByb2plY3QoKTtcbiAgICAvLyBjcmVhdGVQcm9qZWN0QXJyYXkoKTtcbiAgfVxuXG4gIGNvbnN0IHVwZGF0ZVByb2plY3QgPSAoY3VycmVudE5hbWUsIG5ld05hbWUpID0+IHtcbiAgICBjb25zb2xlLmxvZyhjdXJyZW50TmFtZSwgbmV3TmFtZSk7XG4gICAgbGV0IGluZGV4ID0gcHJvamVjdExpc3QuaW5kZXhPZihjdXJyZW50TmFtZSk7XG4gICAgcHJvamVjdExpc3RbaW5kZXhdID0gbmV3TmFtZTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RMaXN0XCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RMaXN0KSk7XG4gICAgZGlzcGxheVByb2plY3QoKTtcbiAgICBwb3B1bGF0ZVByb2plY3REcm9wRG93bigpO1xuICB9XG4gICAgICBcbiAgZGlzcGxheVByb2plY3QoKTtcbiAgcG9wdWxhdGVQcm9qZWN0RHJvcERvd24oKTtcbiAgXG4gIHJldHVybiB7Y3JlYXRlUHJvamVjdCwgcHJvamVjdExpc3QsIHVwZGF0ZVByb2plY3QsIGRpc3BsYXlQcm9qZWN0fVxufSkoKTsiLCJpbXBvcnQgeyBwcm9qZWN0U3R1ZmYgfSBmcm9tIFwiLi9wcm9qZWN0c1wiO1xuaW1wb3J0IHsgdG9Eb1N0dWZmIH0gZnJvbSBcIi4vdG9kb3NcIjtcblxuZXhwb3J0IGNvbnN0IGJ0bkFjdGlvbnMgPSAoKCkgPT4ge1xuICBjb25zdCB0b2RvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvJyk7XG4gIGNvbnN0IGZvcm1NZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm0tbWVzc2FnZScpO1xuICBjb25zdCBmb3JtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0tY29udGFpbmVyJyk7XG4gIGNvbnN0IHByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1jb250YWluZXInKTtcbiAgXG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0ZScpO1xuICBjb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmlvcml0eScpO1xuICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3Qtc2VsZWN0Jyk7XG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWJtaXQtYnRuJyk7XG4gIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtYnRuJyk7XG5cbiAgY29uc3Qgc2hvd0Zvcm0gPSAobXNnLCB0eXBlLCBjdXJyZW50KSA9PiB7XG4gICAgdG9kb0J0bi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBwcm9qZWN0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIGZvcm1NZXNzYWdlLnRleHRDb250ZW50ID0gbXNnO1xuICAgIGZvcm1Db250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgc3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTdWJtaXRcIjtcbiAgICBjYW5jZWxCdG4udGV4dENvbnRlbnQgPSBcIkNhbmNlbFwiO1xuICAgIGlmICh0eXBlID09PSAndG9kbycpIHtcbiAgICAgIHNob3dGb3JtSW5wdXRzKCk7XG4gICAgICBzdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRvRG9TdHVmZi5jcmVhdGVUb2RvKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpLnZhbHVlLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdCcpLnZhbHVlKTtcbiAgICAgICAgaGlkZUZvcm0oJ3RvZG8nKTtcbiAgICAgIH0sIHtvbmNlOiB0cnVlfSlcbiAgICB9IGlmICh0eXBlID09PSAnZWRpdCB0b2RvJykge1xuICAgICAgc2hvd0Zvcm1JbnB1dHMoKTtcbiAgICAgIHN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiVXBkYXRlXCI7XG4gICAgICBzdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIC8vdXBkYXRlIHRvZG8gaXRlbVxuICAgICAgICB0b0RvU3R1ZmYudXBkYXRlVG9kbyhjdXJyZW50LCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpLnZhbHVlLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZScpLnZhbHVlLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKS52YWx1ZSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QnKS52YWx1ZSk7XG4gICAgICAgIGhpZGVGb3JtKCk7XG4gICAgICB9LCB7b25jZTogdHJ1ZX0pO1xuXG4gICAgICBjYW5jZWxCdG4udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiO1xuICAgICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvL2RlbGV0ZSB0b2RvIGl0ZW1cbiAgICAgICAgbGV0IGluZGV4ID0gdG9Eb1N0dWZmLnRvRG9zLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBlLm5hbWU7XG4gICAgICAgIH0pLmluZGV4T2YoY3VycmVudCk7XG4gICAgICAgIHRvRG9TdHVmZi50b0Rvcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvRG9zXCIsIEpTT04uc3RyaW5naWZ5KHRvRG9TdHVmZi50b0RvcykpO1xuICAgICAgICBwcm9qZWN0U3R1ZmYuZGlzcGxheVByb2plY3QoKTtcbiAgICAgICAgaGlkZUZvcm0oKTtcbiAgICAgIH0sIHtvbmNlOiB0cnVlfSk7XG4gICAgfSBpZiAodHlwZSA9PT0gJ3Byb2plY3QnKSB7XG4gICAgICBoaWRlRm9ybUlucHV0cygpO1xuICAgICAgc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBwcm9qZWN0U3R1ZmYuY3JlYXRlUHJvamVjdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpLnZhbHVlKTtcbiAgICAgICAgaGlkZUZvcm0oKTtcbiAgICAgIH0sIHtvbmNlOiB0cnVlfSk7XG4gICAgfSBpZiAodHlwZSA9PT0gJ2VkaXQgcHJvamVjdCcpIHtcbiAgICAgIGhpZGVGb3JtSW5wdXRzKCk7XG4gICAgICBzdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlVwZGF0ZVwiO1xuICAgICAgc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBwcm9qZWN0U3R1ZmYudXBkYXRlUHJvamVjdChjdXJyZW50LCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpLnZhbHVlKTtcbiAgICAgICAgaGlkZUZvcm0oKTtcbiAgICAgIH0sIHtvbmNlOiB0cnVlfSk7XG5cbiAgICAgIGNhbmNlbEJ0bi50ZXh0Q29udGVudCA9IFwiRGVsZXRlXCI7XG4gICAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIC8vZGVsZXRlIHRvZG8gaXRlbVxuICAgICAgICBsZXQgaW5kZXggPSBwcm9qZWN0U3R1ZmYucHJvamVjdExpc3QubWFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGUubmFtZTtcbiAgICAgICAgfSkuaW5kZXhPZihjdXJyZW50KTtcbiAgICAgICAgcHJvamVjdFN0dWZmLnByb2plY3RMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdExpc3RcIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdFN0dWZmLnByb2plY3RMaXN0KSk7XG4gICAgICAgIHByb2plY3RTdHVmZi5kaXNwbGF5UHJvamVjdCgpO1xuICAgICAgICBoaWRlRm9ybSgpO1xuICAgICAgfSwge29uY2U6IHRydWV9KTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBzaG93Rm9ybUlucHV0cyA9ICgpID0+IHtcbiAgICBkYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIHByaW9yaXR5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIHByb2plY3QuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gIH1cblxuICBjb25zdCBoaWRlRm9ybUlucHV0cyA9ICgpID0+IHtcbiAgICBkYXRlLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIHByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIHByb2plY3QuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gIH1cblxuICBjb25zdCBoaWRlRm9ybSA9ICgpID0+IHtcbiAgICB0b2RvQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIGZvcm1NZXNzYWdlLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBmb3JtQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIHByb2plY3RDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgLy9yZXNldCBwcmlvcml0eSBhbmQgcHJvamVjdFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpLnNlbGVjdGVkSW5kZXggPSAwO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0Jykuc2VsZWN0ZWRJbmRleCA9IDA7XG4gICAgLy9yZXNldCBpbnB1dHNcbiAgICBsZXQgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaW5wdXRzW2ldLnZhbHVlID0gXCJcIjtcbiAgICB9XG4gIH1cblxuICAvL2FkZCB0b2RvIGJ1dHRvbiBzaG93IGZvcm1cbiAgdG9kb0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBzaG93Rm9ybSgnQWRkIFRvLWRvJywgJ3RvZG8nKTtcbiAgfSk7XG4gIFxuICByZXR1cm4ge3Nob3dGb3JtLCBoaWRlRm9ybX1cbn0pKCk7XG5cbiAgIl0sIm5hbWVzIjpbInRvRG9TdHVmZiIsInRvRG9zIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNyZWF0ZVRvZG8iLCJuYW1lIiwiZGF0ZSIsInByaW9yaXR5IiwicHJvamVjdE5hbWUiLCJ0b0RvIiwicHVzaCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJwcm9qZWN0U3R1ZmYiLCJkaXNwbGF5UHJvamVjdCIsImF0dGFjaFRvUHJvamVjdCIsInByb2plY3RMaXN0IiwiZm9yRWFjaCIsImUiLCJwcm9qZWN0QXJyYXkiLCJjb25zb2xlIiwibG9nIiwiY3JlYXRlUHJvamVjdCIsInVwZGF0ZVRvZG8iLCJjdXJyZW50IiwicHJvamVjdCIsImluZGV4IiwibWFwIiwiaW5kZXhPZiIsInBvcHVsYXRlUHJvamVjdERyb3BEb3duIiwicHJvamVjdFNlbGVjdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJwcm9qZWN0T3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJwcm9qZWN0Q29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsImNsYXNzTmFtZSIsInJlcGxhY2UiLCJ0b0xvd2VyQ2FzZSIsInByb2plY3REaXYiLCJlZGl0SWNvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlZGl0QWN0aW9uIiwibmV3VG9kbyIsIm5ld0ljb24iLCJhcHBlbmQiLCJidG5BY3Rpb25zIiwic2hvd0Zvcm0iLCJ0IiwidG9Eb0l0ZW0iLCJ0b0RvTmFtZSIsInRvRG9Qcmlvcml0eSIsInRvRG9EYXRlIiwiZWRpdFRvZG9BY3Rpb24iLCJuZXdQcm9qZWN0IiwibXNnIiwidHlwZSIsInZhbHVlIiwidG9kbyIsInVwZGF0ZVByb2plY3QiLCJjdXJyZW50TmFtZSIsIm5ld05hbWUiLCJ0b2RvQnRuIiwiZm9ybU1lc3NhZ2UiLCJmb3JtQ29udGFpbmVyIiwic3VibWl0QnRuIiwiY2FuY2VsQnRuIiwicmVtb3ZlIiwic2hvd0Zvcm1JbnB1dHMiLCJwcmV2ZW50RGVmYXVsdCIsImhpZGVGb3JtIiwib25jZSIsInNwbGljZSIsImhpZGVGb3JtSW5wdXRzIiwic2VsZWN0ZWRJbmRleCIsImlucHV0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpIiwibGVuZ3RoIl0sInNvdXJjZVJvb3QiOiIifQ==