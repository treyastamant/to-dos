(()=>{"use strict";const e=(()=>{let e=JSON.parse(localStorage.getItem("toDos"))||[];return{createTodo:(o,c,n,r)=>{let d={name:o,date:c,priority:n,projectName:r};return e.push(d),localStorage.setItem("toDos",JSON.stringify(e)),t.displayProject(),{toDos:e}},attachToProject:(e,o)=>{t.projectList.forEach((t=>{if(o===t){let t;t.push(e),console.log(t)}})),t.projectList.forEach((o=>{t.createProject.e.push(e),console.log(t.createProject.projectArray)}))},toDos:e,updateTodo:(o,c,n,r,d)=>{let a=e.map((function(e){return e.name})).indexOf(o);e[a].name=c,e[a].date=n,e[a].priority=r,e[a].projectName=d,localStorage.setItem("toDos",JSON.stringify(e)),t.displayProject()}}})(),t=(()=>{const t=JSON.parse(localStorage.getItem("projectList"))||["Personal"],c=()=>{const e=document.getElementById("project");e.innerHTML="",t.forEach((t=>{const o=document.createElement("option");o.setAttribute("value",t),o.classList.add("project-option"),o.textContent=t,e.appendChild(o)}))},n=()=>{const c=document.querySelector(".project-container");c.innerHTML="",t.forEach((n=>{const a=document.createElement("div");a.dataset.project=n.replace(/\s+/g,"-").toLowerCase(),a.className="project-div";const s=document.createElement("h2");s.classList.add("project-name");const l=document.createElement("span");l.classList.add("material-symbols-outlined","edit"),l.textContent="edit",l.addEventListener("click",(()=>{r("Edit Project Name","edit project",n)}));const i=document.createElement("button");i.classList.add("add-todo","project-button");const u=document.createElement("span");u.classList.add("material-symbols-outlined","edit"),u.textContent="add",console.log(n),i.append(u,"Add To Do"),i.addEventListener("click",(()=>{o.showForm("Create New Item","todo",n)})),s.textContent=n,c.appendChild(a),a.appendChild(s),s.appendChild(l),a.appendChild(i),localStorage.setItem("projectList",JSON.stringify(t)),e.toDos.forEach((e=>{if(e.projectName===n){const t=document.createElement("div");t.classList.add("to-do-item");const o=document.createElement("input");o.setAttribute("type","checkbox");const c=document.createElement("span");c.textContent=e.name;const n=document.createElement("span");n.textContent=e.priority;const r=document.createElement("span");r.textContent=e.date;const s=document.createElement("span");s.classList.add("material-symbols-outlined","edit"),s.textContent="edit",s.addEventListener("click",(()=>{d("Edit To Do","edit todo",e)})),a.appendChild(t),t.append(o,c,n,r,s)}}))}));const n=document.createElement("button");n.classList.add("project-button");const a=document.createElement("span");a.classList.add("material-symbols-outlined","edit"),a.textContent="add",n.append(a,"Create New List"),c.appendChild(n),n.addEventListener("click",(()=>{o.showForm("Create New List","project")}))},r=(e,t,c)=>{document.querySelector("#name").value=c,o.showForm(e,t,c)},d=(e,t,c)=>{document.querySelector("#name").value=c.name,document.querySelector("#date").value=c.date,document.querySelector("#priority").value=c.priority,document.querySelector("#project").value=c.projectName,o.showForm(e,t,c.name)};return n(),c(),{createProject:e=>{t.push(e),localStorage.setItem("projectList",JSON.stringify(t)),c(),n()},projectList:t,updateProject:(e,o)=>{console.log(e,o);let r=t.indexOf(e);t[r]=o,localStorage.setItem("projectList",JSON.stringify(t)),n(),c()},displayProject:n}})(),o=(()=>{const o=document.querySelector(".add-todo"),c=document.querySelector("#form-message"),n=document.querySelector(".form-container"),r=document.querySelector(".project-container"),d=document.querySelector(".date"),a=document.querySelector(".priority"),s=document.querySelector(".project-select"),l=document.querySelector(".submit-btn"),i=document.querySelector(".cancel-btn"),u=()=>{d.classList.remove("hidden"),a.classList.remove("hidden"),s.classList.remove("hidden")},m=()=>{d.classList.add("hidden"),a.classList.add("hidden"),s.classList.add("hidden")},p=()=>{o.classList.remove("hidden"),c.textContent="",n.classList.add("hidden"),r.classList.remove("hidden"),document.querySelector("#priority").selectedIndex=0,document.querySelector("#project").selectedIndex=0;let e=document.querySelectorAll("input");for(let t=0;t<e.length;t++)e[t].value=""};return{showForm:(d,a,s)=>{if(o.classList.add("hidden"),r.classList.add("hidden"),c.textContent=d,n.classList.remove("hidden"),l.textContent="Submit",i.textContent="Cancel","todo"===a){u();const o=t.projectList.indexOf(s);document.querySelector("#project").value=t.projectList[o],l.addEventListener("click",(t=>{t.preventDefault(),e.createTodo(document.querySelector("#name").value,document.querySelector("#date").value,document.querySelector("#priority").value,document.querySelector("#project").value),p()}),{once:!0})}"edit todo"===a&&(u(),l.textContent="Update",l.addEventListener("click",(t=>{t.preventDefault(),e.updateTodo(s,document.querySelector("#name").value,document.querySelector("#date").value,document.querySelector("#priority").value,document.querySelector("#project").value),p()}),{once:!0}),i.textContent="Delete",i.addEventListener("click",(o=>{o.preventDefault();let c=e.toDos.map((function(e){return e.name})).indexOf(s);e.toDos.splice(c,1),localStorage.setItem("toDos",JSON.stringify(e.toDos)),t.displayProject(),p()}),{once:!0})),"project"===a&&(m(),l.addEventListener("click",(e=>{e.preventDefault(),t.createProject(document.querySelector("#name").value),p()}),{once:!0})),"edit project"===a&&(m(),l.textContent="Update",l.addEventListener("click",(e=>{e.preventDefault(),t.updateProject(s,document.querySelector("#name").value),p()}),{once:!0}),i.textContent="Delete",i.addEventListener("click",(e=>{e.preventDefault();let o=t.projectList.indexOf(s);t.projectList.splice(o,1),localStorage.setItem("projectList",JSON.stringify(t.projectList)),t.displayProject(),p()}),{once:!0}))},hideForm:p}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3ZDeEIsYUFBYVMsUUFBUSxjQUFlWCxLQUFLWSxVQUFVQyxFQUFhRyxjQUNoRUgsRUFBYUMsaUJBQ2JpRSxHQUFVLEdBQ1QsQ0FBQ1EsTUFBTSxJQUNaLEVBOEJnQlIsV0FDbkIsRUE1R3lCLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90by1kb3MvLi9zcmMvdG9kb3MuanMiLCJ3ZWJwYWNrOi8vdG8tZG9zLy4vc3JjL3Byb2plY3RzLmpzIiwid2VicGFjazovL3RvLWRvcy8uL3NyYy9idG4tYWN0aW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcm9qZWN0U3R1ZmYgfSBmcm9tIFwiLi9wcm9qZWN0c1wiO1xuaW1wb3J0IHsgYnRuQWN0aW9ucyB9IGZyb20gXCIuL2J0bi1hY3Rpb25zXCI7XG5cbmV4cG9ydCBjb25zdCB0b0RvU3R1ZmYgPSAoKCkgPT4ge1xubGV0IHRvRG9zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRvRG9zXCIpKSB8fCBbXTtcbiAgY29uc3QgY3JlYXRlVG9kbyA9IChuYW1lLCBkYXRlLCBwcmlvcml0eSwgcHJvamVjdE5hbWUpID0+IHtcbiAgIFxuICAgIGxldCB0b0RvID0ge25hbWUsIGRhdGUsIHByaW9yaXR5LCBwcm9qZWN0TmFtZX07XG4gICAgdG9Eb3MucHVzaCh0b0RvKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvRG9zXCIsIEpTT04uc3RyaW5naWZ5KHRvRG9zKSk7XG4gICAgcHJvamVjdFN0dWZmLmRpc3BsYXlQcm9qZWN0KCk7XG4gICAgLy8gYXR0YWNoVG9Qcm9qZWN0KHRvRG8sIHByb2plY3ROYW1lKTtcblxuICAgIHJldHVybiB7dG9Eb3N9O1xuICB9XG5cbiAgY29uc3QgYXR0YWNoVG9Qcm9qZWN0ID0gKHRvRG8sIHByb2plY3ROYW1lKSA9PiB7XG4gICAgcHJvamVjdFN0dWZmLnByb2plY3RMaXN0LmZvckVhY2goKGUpID0+IHtcbiAgICAgIGlmIChwcm9qZWN0TmFtZSA9PT0gZSkge1xuICAgICAgICBsZXQgcHJvamVjdEFycmF5O1xuICAgICAgICBwcm9qZWN0QXJyYXkucHVzaCh0b0RvKTtcbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdEFycmF5KTtcbiAgICAgICAgLy8gY29uc3QgY2xhc3NOYW1lID0gZS5yZXBsYWNlKC9cXHMrL2csICctJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coY2xhc3NOYW1lKVxuICAgICAgICAvLyBjb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2NsYXNzTmFtZX1gKTtcbiAgICAgICAgLy8gY29uc3QgdG9Eb0l0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIC8vIHRvRG9JdGVtLnRleHRDb250ZW50ID0gdG9Eby5uYW1lO1xuXG4gICAgICAgIC8vIHByb2plY3ROYW1lLmFwcGVuZENoaWxkKHRvRG9JdGVtKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZSwgcHJvamVjdE5hbWUpXG4gICAgICB9XG4gICAgfSlcblxuICAgIHByb2plY3RTdHVmZi5wcm9qZWN0TGlzdC5mb3JFYWNoKChlKSA9PiB7XG4gICAgICBpZiAocHJvamVjdE5hbWUgPT09IGUpO1xuICAgICAgcHJvamVjdFN0dWZmLmNyZWF0ZVByb2plY3QuZS5wdXNoKHRvRG8pO1xuICAgICAgICAvLyBlLnB1c2godG9Ebyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RTdHVmZi5jcmVhdGVQcm9qZWN0LnByb2plY3RBcnJheSk7XG4gICAgfSlcbiAgXG4gIH1cblxuICBjb25zdCB1cGRhdGVUb2RvID0gKGN1cnJlbnQsIG5hbWUsIGRhdGUsIHByaW9yaXR5LCBwcm9qZWN0KSA9PiB7XG4gICAgICBsZXQgaW5kZXggPSB0b0Rvcy5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gZS5uYW1lO1xuICAgICAgfSkuaW5kZXhPZihjdXJyZW50KTtcbiAgICAgICAgdG9Eb3NbaW5kZXhdLm5hbWUgPSBuYW1lO1xuICAgICAgICB0b0Rvc1tpbmRleF0uZGF0ZSA9IGRhdGU7XG4gICAgICAgIHRvRG9zW2luZGV4XS5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0b0Rvc1tpbmRleF0ucHJvamVjdE5hbWUgPSBwcm9qZWN0O1xuICBcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvRG9zXCIsIEpTT04uc3RyaW5naWZ5KHRvRG9zKSk7XG4gICAgcHJvamVjdFN0dWZmLmRpc3BsYXlQcm9qZWN0KCk7XG4gIH1cblxuICByZXR1cm4geyBjcmVhdGVUb2RvLCBhdHRhY2hUb1Byb2plY3QsIHRvRG9zLCB1cGRhdGVUb2RvIH07XG59KSgpOyIsImltcG9ydCB7IGJ0bkFjdGlvbnMgfSBmcm9tIFwiLi9idG4tYWN0aW9uc1wiO1xuaW1wb3J0IHsgdG9Eb1N0dWZmIH0gZnJvbSBcIi4vdG9kb3NcIjtcblxuZXhwb3J0IGNvbnN0IHByb2plY3RTdHVmZiA9ICgoKSA9PiB7XG4gIC8vIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICBjb25zdCBwcm9qZWN0TGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwcm9qZWN0TGlzdFwiKSkgfHwgWydQZXJzb25hbCddO1xuICBcbiAgXG4gIC8vYWRkIHByb2plY3QgdG8gZHJvcC1kb3duXG4gIGNvbnN0IHBvcHVsYXRlUHJvamVjdERyb3BEb3duID0gKCkgPT4ge1xuICAgIGNvbnN0IHByb2plY3RTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdCcpO1xuICAgIHByb2plY3RTZWxlY3QuaW5uZXJIVE1MID0gXCJcIjtcbiAgICBwcm9qZWN0TGlzdC5mb3JFYWNoKChlKSA9PiB7XG4gICAgICBjb25zdCBwcm9qZWN0T3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICBwcm9qZWN0T3B0aW9uLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBlKTtcbiAgICAgIHByb2plY3RPcHRpb24uY2xhc3NMaXN0LmFkZCgncHJvamVjdC1vcHRpb24nKTtcbiAgICAgIHByb2plY3RPcHRpb24udGV4dENvbnRlbnQgPSBlO1xuICAgICAgcHJvamVjdFNlbGVjdC5hcHBlbmRDaGlsZChwcm9qZWN0T3B0aW9uKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vc2hvdyBwcm9qZWN0IG5hbWUgb24gcGFnZVxuICBjb25zdCBkaXNwbGF5UHJvamVjdCA9ICgpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtY29udGFpbmVyJyk7XG4gICAgcHJvamVjdENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgIHByb2plY3RMaXN0LmZvckVhY2goKGUpID0+IHtcbiAgICAgIGNvbnN0IHByb2plY3REaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHByb2plY3REaXYuZGF0YXNldC5wcm9qZWN0ID0gZS5yZXBsYWNlKC9cXHMrL2csICctJykudG9Mb3dlckNhc2UoKTtcbiAgICAgIHByb2plY3REaXYuY2xhc3NOYW1lID0gXCJwcm9qZWN0LWRpdlwiO1xuICAgICAgY29uc3QgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgcHJvamVjdE5hbWUuY2xhc3NMaXN0LmFkZCgncHJvamVjdC1uYW1lJyk7XG4gICAgICBjb25zdCBlZGl0SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIGVkaXRJY29uLmNsYXNzTGlzdC5hZGQgKCdtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkJywgJ2VkaXQnKTtcbiAgICAgIGVkaXRJY29uLnRleHRDb250ZW50ID0gJ2VkaXQnO1xuICAgICAgZWRpdEljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGVkaXRBY3Rpb24oYEVkaXQgUHJvamVjdCBOYW1lYCwgJ2VkaXQgcHJvamVjdCcsIGUpXG4gICAgICB9KTtcblxuICAgICAgLy90b2RvIGJ1dHRvblxuICAgICAgY29uc3QgbmV3VG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgbmV3VG9kby5jbGFzc0xpc3QuYWRkKCdhZGQtdG9kbycsICdwcm9qZWN0LWJ1dHRvbicpO1xuICAgICAgXG4gICAgICBjb25zdCBidXR0b25UZXh0VG9kbyA9ICdBZGQgVG8gRG8nXG4gICAgICBjb25zdCBuZXdJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgbmV3SWNvbi5jbGFzc0xpc3QuYWRkICgnbWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCcsICdlZGl0Jyk7XG4gICAgICBuZXdJY29uLnRleHRDb250ZW50ID0gJ2FkZCc7XG4gICAgICBjb25zb2xlLmxvZyhlKVxuXG4gICAgICBuZXdUb2RvLmFwcGVuZChuZXdJY29uLCBidXR0b25UZXh0VG9kbyk7XG4gICAgICBuZXdUb2RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBidG5BY3Rpb25zLnNob3dGb3JtKCdDcmVhdGUgTmV3IEl0ZW0nLCAndG9kbycsIGUpO1xuICAgICAgfSk7XG5cbiAgICAgIHByb2plY3ROYW1lLnRleHRDb250ZW50ID0gZTtcbiAgICAgIHByb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdERpdik7XG4gICAgICBwcm9qZWN0RGl2LmFwcGVuZENoaWxkKHByb2plY3ROYW1lKTtcbiAgICAgIHByb2plY3ROYW1lLmFwcGVuZENoaWxkKGVkaXRJY29uKTtcbiAgICAgIHByb2plY3REaXYuYXBwZW5kQ2hpbGQobmV3VG9kbyk7XG5cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdExpc3RcIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdExpc3QpKTtcbiAgICAgIFxuICAgICAgdG9Eb1N0dWZmLnRvRG9zLmZvckVhY2goKHQpID0+IHtcbiAgICAgICAgaWYgKHQucHJvamVjdE5hbWUgPT09IGUpIHtcbiAgICAgICAgICBjb25zdCB0b0RvSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIHRvRG9JdGVtLmNsYXNzTGlzdC5hZGQoJ3RvLWRvLWl0ZW0nKTtcblxuICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKVxuICAgICAgICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcbiAgICAgICAgICBjb25zdCB0b0RvTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICB0b0RvTmFtZS50ZXh0Q29udGVudCA9IHQubmFtZTtcbiAgICAgICAgICBjb25zdCB0b0RvUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgdG9Eb1ByaW9yaXR5LnRleHRDb250ZW50ID0gdC5wcmlvcml0eTtcbiAgICAgICAgICBjb25zdCB0b0RvRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICB0b0RvRGF0ZS50ZXh0Q29udGVudCA9IHQuZGF0ZTtcbiAgICAgICAgICBjb25zdCBlZGl0SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICBlZGl0SWNvbi5jbGFzc0xpc3QuYWRkICgnbWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCcsICdlZGl0Jyk7XG4gICAgICAgICAgZWRpdEljb24udGV4dENvbnRlbnQgPSAnZWRpdCc7XG4gICAgICAgICAgZWRpdEljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBlZGl0VG9kb0FjdGlvbihgRWRpdCBUbyBEb2AsICdlZGl0IHRvZG8nLCB0KVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcHJvamVjdERpdi5hcHBlbmRDaGlsZCh0b0RvSXRlbSk7XG4gICAgICAgICAgdG9Eb0l0ZW0uYXBwZW5kKGNoZWNrYm94LCB0b0RvTmFtZSwgdG9Eb1ByaW9yaXR5LCB0b0RvRGF0ZSwgZWRpdEljb24pO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG5cbiAgICAvL25ldyBwcm9qZWN0IGJ1dHRvblxuICAgIGNvbnN0IG5ld1Byb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBuZXdQcm9qZWN0LmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtYnV0dG9uJyk7XG4gICAgXG4gICAgY29uc3QgYnV0dG9uVGV4dCA9ICdDcmVhdGUgTmV3IExpc3QnXG4gICAgY29uc3QgbmV3SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBuZXdJY29uLmNsYXNzTGlzdC5hZGQgKCdtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkJywgJ2VkaXQnKTtcbiAgICBuZXdJY29uLnRleHRDb250ZW50ID0gJ2FkZCc7XG5cbiAgICBuZXdQcm9qZWN0LmFwcGVuZChuZXdJY29uLCBidXR0b25UZXh0KTtcbiAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKG5ld1Byb2plY3QpO1xuICAgIG5ld1Byb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBidG5BY3Rpb25zLnNob3dGb3JtKCdDcmVhdGUgTmV3IExpc3QnLCAncHJvamVjdCcpO1xuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgZWRpdEFjdGlvbiA9IChtc2csIHR5cGUsIG5hbWUpID0+IHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpLnZhbHVlID0gbmFtZTtcbiAgICBidG5BY3Rpb25zLnNob3dGb3JtKG1zZywgdHlwZSwgbmFtZSk7XG4gIH1cblxuICBjb25zdCBlZGl0VG9kb0FjdGlvbiA9IChtc2csIHR5cGUsIHRvZG8pID0+IHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpLnZhbHVlID0gdG9kby5uYW1lO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJykudmFsdWUgPSB0b2RvLmRhdGU7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaW9yaXR5JykudmFsdWUgPSB0b2RvLnByaW9yaXR5O1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0JykudmFsdWUgPSB0b2RvLnByb2plY3ROYW1lO1xuICAgIGJ0bkFjdGlvbnMuc2hvd0Zvcm0obXNnLCB0eXBlLCB0b2RvLm5hbWUpO1xuICB9XG5cbiAgLy9wcm9qZWN0IGZhY3RvcnkgZnVuY3Rpb25cbiAgY29uc3QgY3JlYXRlUHJvamVjdCA9IChuYW1lKSA9PiB7XG4gICAgcHJvamVjdExpc3QucHVzaChuYW1lKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RMaXN0XCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RMaXN0KSk7XG5cbiAgICBwb3B1bGF0ZVByb2plY3REcm9wRG93bigpO1xuICAgIGRpc3BsYXlQcm9qZWN0KCk7XG4gICAgLy8gY3JlYXRlUHJvamVjdEFycmF5KCk7XG4gIH1cblxuICBjb25zdCB1cGRhdGVQcm9qZWN0ID0gKGN1cnJlbnROYW1lLCBuZXdOYW1lKSA9PiB7XG4gICAgY29uc29sZS5sb2coY3VycmVudE5hbWUsIG5ld05hbWUpO1xuICAgIGxldCBpbmRleCA9IHByb2plY3RMaXN0LmluZGV4T2YoY3VycmVudE5hbWUpO1xuICAgIHByb2plY3RMaXN0W2luZGV4XSA9IG5ld05hbWU7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0TGlzdFwiLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0TGlzdCkpO1xuICAgIGRpc3BsYXlQcm9qZWN0KCk7XG4gICAgcG9wdWxhdGVQcm9qZWN0RHJvcERvd24oKTtcbiAgfVxuICAgICAgXG4gIGRpc3BsYXlQcm9qZWN0KCk7XG4gIHBvcHVsYXRlUHJvamVjdERyb3BEb3duKCk7XG4gIFxuICByZXR1cm4ge2NyZWF0ZVByb2plY3QsIHByb2plY3RMaXN0LCB1cGRhdGVQcm9qZWN0LCBkaXNwbGF5UHJvamVjdH1cbn0pKCk7IiwiaW1wb3J0IHsgcHJvamVjdFN0dWZmIH0gZnJvbSBcIi4vcHJvamVjdHNcIjtcbmltcG9ydCB7IHRvRG9TdHVmZiB9IGZyb20gXCIuL3RvZG9zXCI7XG5cbmV4cG9ydCBjb25zdCBidG5BY3Rpb25zID0gKCgpID0+IHtcbiAgY29uc3QgdG9kb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG9kbycpO1xuICBjb25zdCBmb3JtTWVzc2FnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtLW1lc3NhZ2UnKTtcbiAgY29uc3QgZm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWNvbnRhaW5lcicpO1xuICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtY29udGFpbmVyJyk7XG4gIFxuICBjb25zdCBkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUnKTtcbiAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJpb3JpdHknKTtcbiAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LXNlbGVjdCcpO1xuICBjb25zdCBzdWJtaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VibWl0LWJ0bicpO1xuICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsLWJ0bicpO1xuXG4gIGNvbnN0IHNob3dGb3JtID0gKG1zZywgdHlwZSwgY3VycmVudCkgPT4ge1xuICAgIHRvZG9CdG4uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgcHJvamVjdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBmb3JtTWVzc2FnZS50ZXh0Q29udGVudCA9IG1zZztcbiAgICBmb3JtQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIHN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU3VibWl0XCI7XG4gICAgY2FuY2VsQnRuLnRleHRDb250ZW50ID0gXCJDYW5jZWxcIjtcbiAgICBpZiAodHlwZSA9PT0gJ3RvZG8nKSB7XG4gICAgICBzaG93Rm9ybUlucHV0cygpO1xuICAgICAgY29uc3QgY3VycmVudFByb2plY3RJbmRleCA9IHByb2plY3RTdHVmZi5wcm9qZWN0TGlzdC5pbmRleE9mKGN1cnJlbnQpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QnKS52YWx1ZSA9IHByb2plY3RTdHVmZi5wcm9qZWN0TGlzdFtjdXJyZW50UHJvamVjdEluZGV4XTtcblxuICAgICAgc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0b0RvU3R1ZmYuY3JlYXRlVG9kbyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpLnZhbHVlLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZScpLnZhbHVlLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKS52YWx1ZSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QnKS52YWx1ZSk7XG4gICAgICAgIGhpZGVGb3JtKCd0b2RvJyk7XG4gICAgICB9LCB7b25jZTogdHJ1ZX0pXG4gICAgfSBpZiAodHlwZSA9PT0gJ2VkaXQgdG9kbycpIHtcbiAgICAgIHNob3dGb3JtSW5wdXRzKCk7XG4gICAgICBzdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlVwZGF0ZVwiO1xuICAgICAgc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvL3VwZGF0ZSB0b2RvIGl0ZW1cbiAgICAgICAgdG9Eb1N0dWZmLnVwZGF0ZVRvZG8oY3VycmVudCwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKS52YWx1ZSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKS52YWx1ZSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaW9yaXR5JykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0JykudmFsdWUpO1xuICAgICAgICBoaWRlRm9ybSgpO1xuICAgICAgfSwge29uY2U6IHRydWV9KTtcblxuICAgICAgY2FuY2VsQnRuLnRleHRDb250ZW50ID0gXCJEZWxldGVcIjtcbiAgICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgLy9kZWxldGUgdG9kbyBpdGVtXG4gICAgICAgIGxldCBpbmRleCA9IHRvRG9TdHVmZi50b0Rvcy5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gZS5uYW1lO1xuICAgICAgICB9KS5pbmRleE9mKGN1cnJlbnQpO1xuICAgICAgICB0b0RvU3R1ZmYudG9Eb3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b0Rvc1wiLCBKU09OLnN0cmluZ2lmeSh0b0RvU3R1ZmYudG9Eb3MpKTtcbiAgICAgICAgcHJvamVjdFN0dWZmLmRpc3BsYXlQcm9qZWN0KCk7XG4gICAgICAgIGhpZGVGb3JtKCk7XG4gICAgICB9LCB7b25jZTogdHJ1ZX0pO1xuICAgIH0gaWYgKHR5cGUgPT09ICdwcm9qZWN0Jykge1xuICAgICAgaGlkZUZvcm1JbnB1dHMoKTtcbiAgICAgIHN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcHJvamVjdFN0dWZmLmNyZWF0ZVByb2plY3QoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKS52YWx1ZSk7XG4gICAgICAgIGhpZGVGb3JtKCk7XG4gICAgICB9LCB7b25jZTogdHJ1ZX0pO1xuICAgIH0gaWYgKHR5cGUgPT09ICdlZGl0IHByb2plY3QnKSB7XG4gICAgICBoaWRlRm9ybUlucHV0cygpO1xuICAgICAgc3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJVcGRhdGVcIjtcbiAgICAgIHN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcHJvamVjdFN0dWZmLnVwZGF0ZVByb2plY3QoY3VycmVudCwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKS52YWx1ZSk7XG4gICAgICAgIGhpZGVGb3JtKCk7XG4gICAgICB9LCB7b25jZTogdHJ1ZX0pO1xuXG4gICAgICBjYW5jZWxCdG4udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiO1xuICAgICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvL2RlbGV0ZSB0b2RvIGl0ZW1cbiAgICAgICAgbGV0IGluZGV4ID0gcHJvamVjdFN0dWZmLnByb2plY3RMaXN0LmluZGV4T2YoY3VycmVudCk7XG4gICAgICAgIHByb2plY3RTdHVmZi5wcm9qZWN0TGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RMaXN0XCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RTdHVmZi5wcm9qZWN0TGlzdCkpO1xuICAgICAgICBwcm9qZWN0U3R1ZmYuZGlzcGxheVByb2plY3QoKTtcbiAgICAgICAgaGlkZUZvcm0oKTtcbiAgICAgIH0sIHtvbmNlOiB0cnVlfSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc2hvd0Zvcm1JbnB1dHMgPSAoKSA9PiB7XG4gICAgZGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICBwcmlvcml0eS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICBwcm9qZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICB9XG5cbiAgY29uc3QgaGlkZUZvcm1JbnB1dHMgPSAoKSA9PiB7XG4gICAgZGF0ZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBwcmlvcml0eS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBwcm9qZWN0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICB9XG5cbiAgY29uc3QgaGlkZUZvcm0gPSAoKSA9PiB7XG4gICAgdG9kb0J0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICBmb3JtTWVzc2FnZS50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZm9ybUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBwcm9qZWN0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIC8vcmVzZXQgcHJpb3JpdHkgYW5kIHByb2plY3RcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKS5zZWxlY3RlZEluZGV4ID0gMDtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdCcpLnNlbGVjdGVkSW5kZXggPSAwO1xuICAgIC8vcmVzZXQgaW5wdXRzXG4gICAgbGV0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0Jyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlucHV0c1tpXS52YWx1ZSA9IFwiXCI7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4ge3Nob3dGb3JtLCBoaWRlRm9ybX1cbn0pKCk7XG5cbiAgIl0sIm5hbWVzIjpbInRvRG9TdHVmZiIsInRvRG9zIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNyZWF0ZVRvZG8iLCJuYW1lIiwiZGF0ZSIsInByaW9yaXR5IiwicHJvamVjdE5hbWUiLCJ0b0RvIiwicHVzaCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJwcm9qZWN0U3R1ZmYiLCJkaXNwbGF5UHJvamVjdCIsImF0dGFjaFRvUHJvamVjdCIsInByb2plY3RMaXN0IiwiZm9yRWFjaCIsImUiLCJwcm9qZWN0QXJyYXkiLCJjb25zb2xlIiwibG9nIiwiY3JlYXRlUHJvamVjdCIsInVwZGF0ZVRvZG8iLCJjdXJyZW50IiwicHJvamVjdCIsImluZGV4IiwibWFwIiwiaW5kZXhPZiIsInBvcHVsYXRlUHJvamVjdERyb3BEb3duIiwicHJvamVjdFNlbGVjdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJwcm9qZWN0T3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJwcm9qZWN0Q29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsInByb2plY3REaXYiLCJkYXRhc2V0IiwicmVwbGFjZSIsInRvTG93ZXJDYXNlIiwiY2xhc3NOYW1lIiwiZWRpdEljb24iLCJhZGRFdmVudExpc3RlbmVyIiwiZWRpdEFjdGlvbiIsIm5ld1RvZG8iLCJuZXdJY29uIiwiYXBwZW5kIiwiYnRuQWN0aW9ucyIsInNob3dGb3JtIiwidCIsInRvRG9JdGVtIiwiY2hlY2tib3giLCJ0b0RvTmFtZSIsInRvRG9Qcmlvcml0eSIsInRvRG9EYXRlIiwiZWRpdFRvZG9BY3Rpb24iLCJuZXdQcm9qZWN0IiwibXNnIiwidHlwZSIsInZhbHVlIiwidG9kbyIsInVwZGF0ZVByb2plY3QiLCJjdXJyZW50TmFtZSIsIm5ld05hbWUiLCJ0b2RvQnRuIiwiZm9ybU1lc3NhZ2UiLCJmb3JtQ29udGFpbmVyIiwic3VibWl0QnRuIiwiY2FuY2VsQnRuIiwic2hvd0Zvcm1JbnB1dHMiLCJyZW1vdmUiLCJoaWRlRm9ybUlucHV0cyIsImhpZGVGb3JtIiwic2VsZWN0ZWRJbmRleCIsImlucHV0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpIiwibGVuZ3RoIiwiY3VycmVudFByb2plY3RJbmRleCIsInByZXZlbnREZWZhdWx0Iiwib25jZSIsInNwbGljZSJdLCJzb3VyY2VSb290IjoiIn0=