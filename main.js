(()=>{"use strict";const e=(()=>{let e=JSON.parse(localStorage.getItem("toDos"))||[];return{createTodo:(t,o,n,c)=>{let d={name:t,date:o,priority:n,projectId:parseInt(c),id:(new Date).getTime()};return e.push(d),localStorage.setItem("toDos",JSON.stringify(e)),{toDos:e}},toDos:e,updateTodo:(t,o,n,c,d)=>{let r=parseInt(d);t.name=o,t.date=n,t.priority=c,t.projectId=r,localStorage.setItem("toDos",JSON.stringify(e))}}})(),t=(()=>{const t=JSON.parse(localStorage.getItem("projectList"))||[{name:"Personal",id:1}],n=()=>{const e=document.getElementById("project");e.innerHTML="",t.forEach((t=>{const o=document.createElement("option");o.value=t.id,o.setAttribute("dataset",t.id),o.classList.add("project-option"),o.textContent=t.name,e.appendChild(o)}))},c=()=>{const n=document.querySelector(".project-container");n.innerHTML="",t.forEach((c=>{const d=document.createElement("div");d.className="project-div";const r=document.createElement("h2");r.classList.add("project-name");const a=document.createElement("span");a.classList.add("material-symbols-outlined","edit"),a.textContent="edit",a.addEventListener("click",(()=>{o.showForm("Edit Project Name"),o.editProject(c)}),{once:!0});const s=document.createElement("button");s.classList.add("add-todo","project-icon");const l=document.createElement("span");l.classList.add("material-symbols-outlined","edit"),l.textContent="add",s.append(l,"Add To Do"),s.addEventListener("click",(()=>{o.showForm("Create New Item"),o.newToDo(c)}),{once:!0}),r.textContent=c.name,n.appendChild(d),d.appendChild(r),r.appendChild(a),d.appendChild(s),localStorage.setItem("projectList",JSON.stringify(t)),e.toDos.forEach((e=>{if(e.projectId===c.id){const t=document.createElement("div");t.classList.add("to-do-item"),t.setAttribute("id",e.id);const n=document.createElement("input");n.setAttribute("type","checkbox"),n.setAttribute("class","checkbox");const c=document.createElement("span");c.textContent=e.name;const r=document.createElement("span");r.textContent=e.priority;const a=document.createElement("span");a.textContent=e.date;const s=document.createElement("span");s.classList.add("material-symbols-outlined","edit"),s.textContent="edit",s.addEventListener("click",(()=>{o.showForm("Edit To Do"),o.editToDo(e)})),d.appendChild(t),t.append(n,c,r,a,s)}}))}));const c=document.createElement("button");c.classList.add("project-icon");const d=document.createElement("span");d.classList.add("material-symbols-outlined","edit"),d.textContent="add",c.append(d,"Create New List"),n.appendChild(c),c.addEventListener("click",(()=>{o.showForm("Create New List"),o.newProject()}))};return c(),n(),{createProject:e=>{const o={name:e,id:(new Date).getTime()};t.push(o),localStorage.setItem("projectList",JSON.stringify(t)),n()},projectList:t,updateProject:(e,o)=>{e.name=o,localStorage.setItem("projectList",JSON.stringify(t)),n()},displayProject:c}})(),o=(()=>{const o=document.querySelector(".add-todo"),n=document.querySelector("#form-message"),c=document.querySelector(".form-container"),d=document.querySelector(".project-container"),r=document.querySelector(".date"),a=document.querySelector(".priority"),s=document.querySelector(".project-select"),l=document.querySelector(".buttons"),i=()=>{o.classList.remove("hidden"),n.textContent="",c.classList.add("hidden"),d.classList.remove("hidden"),t.displayProject()},u=()=>{r.classList.remove("hidden"),a.classList.remove("hidden"),s.classList.remove("hidden")},m=()=>{r.classList.add("hidden"),a.classList.add("hidden"),s.classList.add("hidden")};return{showForm:e=>{l.innerHTML="",document.querySelector("#name").classList.remove("required"),document.querySelector("#priority").selectedIndex=0,document.querySelector("#project").selectedIndex=0;let t=document.querySelectorAll("input");for(let e=0;e<t.length;e++)t[e].value="";d.classList.add("hidden"),n.textContent=e,c.classList.remove("hidden")},hideForm:i,newToDo:t=>{u(),document.querySelector("#project").value=t.id;const o=document.createElement("button");o.textContent="Submit",o.addEventListener("click",(t=>{t.preventDefault(),document.querySelector("#name").value?(e.createTodo(document.querySelector("#name").value,document.querySelector("#date").value,document.querySelector("#priority").value,document.querySelector("#project").value),i()):document.querySelector("#name").classList.add("required")})),l.appendChild(o);const n=document.createElement("button");n.textContent="Cancel",n.addEventListener("click",(e=>{e.preventDefault(),i()})),l.appendChild(n)},editToDo:t=>{u(),document.querySelector("#name").value=t.name,document.querySelector("#date").value=t.date,document.querySelector("#priority").value=t.priority,document.querySelector("#project").value=t.projectId;const o=document.createElement("button");o.textContent="Update",o.addEventListener("click",(o=>{o.preventDefault(),e.updateTodo(t,document.querySelector("#name").value,document.querySelector("#date").value,document.querySelector("#priority").value,document.querySelector("#project").value),i()})),l.appendChild(o);const n=document.createElement("button");n.textContent="Delete",n.addEventListener("click",(o=>{o.preventDefault(),e.toDos.splice(e.toDos.indexOf(t),1),localStorage.setItem("toDos",JSON.stringify(e.toDos)),i()})),l.appendChild(n)},newProject:()=>{m();const e=document.createElement("button");e.textContent="Submit",e.addEventListener("click",(e=>{e.preventDefault(),document.querySelector("#name").value?(t.createProject(document.querySelector("#name").value),i()):document.querySelector("#name").classList.add("required")})),l.appendChild(e);const o=document.createElement("button");o.textContent="Cancel",o.addEventListener("click",(e=>{e.preventDefault(),i()})),l.appendChild(o)},editProject:e=>{m(),document.querySelector("#name").value=e.name;const o=document.createElement("button");o.textContent="Update",o.addEventListener("click",(o=>{o.preventDefault(),t.updateProject(e,document.querySelector("#name").value),i()})),l.appendChild(o);const n=document.createElement("button");n.textContent="Delete",n.addEventListener("click",(o=>{o.preventDefault(),t.projectList.splice(t.projectList.indexOf(e),1),localStorage.setItem("projectList",JSON.stringify(t.projectList)),i()})),l.appendChild(n)}}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQU8sTUFBTUEsRUFBWSxNQUN6QixJQUFJQyxFQUFRQyxLQUFLQyxNQUFNQyxhQUFhQyxRQUFRLFdBQWEsR0FtQnZELE1BQU8sQ0FBRUMsV0FsQlUsQ0FBQ0MsRUFBTUMsRUFBTUMsRUFBVUMsS0FDeEMsSUFDSUMsRUFBTyxDQUFDSixPQUFNQyxPQUFNQyxXQUFVRyxVQURsQkMsU0FBU0gsR0FDb0JJLElBQUcsSUFBSUMsTUFBT0MsV0FHM0QsT0FGQWYsRUFBTWdCLEtBQUtOLEdBQ1hQLGFBQWFjLFFBQVEsUUFBU2hCLEtBQUtpQixVQUFVbEIsSUFDdEMsQ0FBQ0EsUUFBTSxFQWFLQSxRQUFPbUIsV0FWVCxDQUFDQyxFQUFTZCxFQUFNQyxFQUFNQyxFQUFVYSxLQUNqRCxJQUFJVixFQUFZQyxTQUFTUyxHQUN6QkQsRUFBUWQsS0FBT0EsRUFDZmMsRUFBUWIsS0FBT0EsRUFDZmEsRUFBUVosU0FBV0EsRUFDbkJZLEVBQVFULFVBQVlBLEVBRXBCUixhQUFhYyxRQUFRLFFBQVNoQixLQUFLaUIsVUFBVWxCLEdBQU8sRUFJdkQsRUFyQndCLEdDR1pzQixFQUFlLE1BRTFCLE1BQU1DLEVBQWN0QixLQUFLQyxNQUFNQyxhQUFhQyxRQUFRLGlCQUFtQixDQUFDLENBQUNFLEtBQUssV0FBWU8sR0FBRyxJQUd2RlcsRUFBMEIsS0FDOUIsTUFBTUMsRUFBZ0JDLFNBQVNDLGVBQWUsV0FDOUNGLEVBQWNHLFVBQVksR0FDMUJMLEVBQVlNLFNBQVNDLElBQ25CLE1BQU1DLEVBQWdCTCxTQUFTTSxjQUFjLFVBQzdDRCxFQUFjRSxNQUFRSCxFQUFFakIsR0FDeEJrQixFQUFjRyxhQUFhLFVBQVdKLEVBQUVqQixJQUN4Q2tCLEVBQWNJLFVBQVVDLElBQUksa0JBQzVCTCxFQUFjTSxZQUFjUCxFQUFFeEIsS0FDOUJtQixFQUFjYSxZQUFZUCxFQUFjLEdBQ3hDLEVBSUVRLEVBQWlCLEtBQ3JCLE1BQU1DLEVBQW1CZCxTQUFTZSxjQUFjLHNCQUNoREQsRUFBaUJaLFVBQVksR0FFN0JMLEVBQVlNLFNBQVNDLElBQ25CLE1BQU1ZLEVBQWFoQixTQUFTTSxjQUFjLE9BQzFDVSxFQUFXQyxVQUFZLGNBQ3ZCLE1BQU1DLEVBQWNsQixTQUFTTSxjQUFjLE1BQzNDWSxFQUFZVCxVQUFVQyxJQUFJLGdCQUMxQixNQUFNUyxFQUFXbkIsU0FBU00sY0FBYyxRQUN4Q2EsRUFBU1YsVUFBVUMsSUFBSyw0QkFBNkIsUUFDckRTLEVBQVNSLFlBQWMsT0FDdkJRLEVBQVNDLGlCQUFpQixTQUFTLEtBQ2pDQyxFQUFXQyxTQUFTLHFCQUNwQkQsRUFBV0UsWUFBWW5CLEVBQUUsR0FDeEIsQ0FBQ29CLE1BQU0sSUFHVixNQUFNQyxFQUFVekIsU0FBU00sY0FBYyxVQUN2Q21CLEVBQVFoQixVQUFVQyxJQUFJLFdBQVksZ0JBRWxDLE1BQ01nQixFQUFVMUIsU0FBU00sY0FBYyxRQUN2Q29CLEVBQVFqQixVQUFVQyxJQUFLLDRCQUE2QixRQUNwRGdCLEVBQVFmLFlBQWMsTUFFdEJjLEVBQVFFLE9BQU9ELEVBTFEsYUFNdkJELEVBQVFMLGlCQUFpQixTQUFTLEtBQ2hDQyxFQUFXQyxTQUFTLG1CQUNwQkQsRUFBV08sUUFBUXhCLEVBQUUsR0FDcEIsQ0FBQ29CLE1BQU0sSUFFVk4sRUFBWVAsWUFBY1AsRUFBRXhCLEtBQzVCa0MsRUFBaUJGLFlBQVlJLEdBQzdCQSxFQUFXSixZQUFZTSxHQUN2QkEsRUFBWU4sWUFBWU8sR0FDeEJILEVBQVdKLFlBQVlhLEdBRXZCaEQsYUFBYWMsUUFBUSxjQUFlaEIsS0FBS2lCLFVBQVVLLElBRW5EeEIsRUFBVUMsTUFBTTZCLFNBQVMwQixJQUN2QixHQUFJQSxFQUFFNUMsWUFBY21CLEVBQUVqQixHQUFJLENBQ3hCLE1BQU0yQyxFQUFXOUIsU0FBU00sY0FBYyxPQUN4Q3dCLEVBQVNyQixVQUFVQyxJQUFJLGNBQ3ZCb0IsRUFBU3RCLGFBQWEsS0FBTXFCLEVBQUUxQyxJQUM5QixNQUFNNEMsRUFBVy9CLFNBQVNNLGNBQWMsU0FDeEN5QixFQUFTdkIsYUFBYSxPQUFRLFlBQzlCdUIsRUFBU3ZCLGFBQWEsUUFBUyxZQUMvQixNQUFNd0IsRUFBV2hDLFNBQVNNLGNBQWMsUUFDeEMwQixFQUFTckIsWUFBY2tCLEVBQUVqRCxLQUN6QixNQUFNcUQsRUFBZWpDLFNBQVNNLGNBQWMsUUFDNUMyQixFQUFhdEIsWUFBY2tCLEVBQUUvQyxTQUM3QixNQUFNb0QsRUFBV2xDLFNBQVNNLGNBQWMsUUFDeEM0QixFQUFTdkIsWUFBY2tCLEVBQUVoRCxLQUN6QixNQUFNc0MsRUFBV25CLFNBQVNNLGNBQWMsUUFDeENhLEVBQVNWLFVBQVVDLElBQUssNEJBQTZCLFFBQ3JEUyxFQUFTUixZQUFjLE9BQ3ZCUSxFQUFTQyxpQkFBaUIsU0FBUyxLQUNqQ0MsRUFBV0MsU0FBUyxjQUNwQkQsRUFBV2MsU0FBU04sRUFBRSxJQUd4QmIsRUFBV0osWUFBWWtCLEdBQ3ZCQSxFQUFTSCxPQUFPSSxFQUFVQyxFQUFVQyxFQUFjQyxFQUFVZixFQUM5RCxJQUNELElBSUgsTUFBTWlCLEVBQWFwQyxTQUFTTSxjQUFjLFVBQzFDOEIsRUFBVzNCLFVBQVVDLElBQUksZ0JBRXpCLE1BQ01nQixFQUFVMUIsU0FBU00sY0FBYyxRQUN2Q29CLEVBQVFqQixVQUFVQyxJQUFLLDRCQUE2QixRQUNwRGdCLEVBQVFmLFlBQWMsTUFFdEJ5QixFQUFXVCxPQUFPRCxFQUxDLG1CQU1uQlosRUFBaUJGLFlBQVl3QixHQUM3QkEsRUFBV2hCLGlCQUFpQixTQUFTLEtBQ25DQyxFQUFXQyxTQUFTLG1CQUNwQkQsRUFBV2UsWUFBWSxHQUN2QixFQW1CSixPQUhBdkIsSUFDQWYsSUFFTyxDQUFDdUMsY0FoQmV6RCxJQUNyQixNQUFNZSxFQUFVLENBQUNmLE9BQU1PLElBQUcsSUFBSUMsTUFBT0MsV0FDckNRLEVBQVlQLEtBQUtLLEdBQ2pCbEIsYUFBYWMsUUFBUSxjQUFlaEIsS0FBS2lCLFVBQVVLLElBQ25EQyxHQUF5QixFQVlKRCxjQUFheUMsY0FUZCxDQUFDNUMsRUFBUzZDLEtBQzlCN0MsRUFBUWQsS0FBTzJELEVBQ2Y5RCxhQUFhYyxRQUFRLGNBQWVoQixLQUFLaUIsVUFBVUssSUFDbkRDLEdBQXlCLEVBTXdCZSxpQkFDcEQsRUF6SDJCLEdDQWZRLEVBQWEsTUFDeEIsTUFBTW1CLEVBQVd4QyxTQUFTZSxjQUFjLGFBQ2xDMEIsRUFBY3pDLFNBQVNlLGNBQWMsaUJBQ3JDMkIsRUFBZ0IxQyxTQUFTZSxjQUFjLG1CQUN2Q0QsRUFBbUJkLFNBQVNlLGNBQWMsc0JBRTFDbEMsRUFBT21CLFNBQVNlLGNBQWMsU0FDOUJqQyxFQUFXa0IsU0FBU2UsY0FBYyxhQUNsQ3BCLEVBQVVLLFNBQVNlLGNBQWMsbUJBQ2pDNEIsRUFBVTNDLFNBQVNlLGNBQWMsWUF1SGpDNkIsRUFBVyxLQUNmSixFQUFTL0IsVUFBVW9DLE9BQU8sVUFDMUJKLEVBQVk5QixZQUFjLEdBQzFCK0IsRUFBY2pDLFVBQVVDLElBQUksVUFDNUJJLEVBQWlCTCxVQUFVb0MsT0FBTyxVQUNsQ2pELEVBQWFpQixnQkFBZ0IsRUFHekJpQyxFQUFpQixLQUNyQmpFLEVBQUs0QixVQUFVb0MsT0FBTyxVQUN0Qi9ELEVBQVMyQixVQUFVb0MsT0FBTyxVQUMxQmxELEVBQVFjLFVBQVVvQyxPQUFPLFNBQVMsRUFHOUJFLEVBQWlCLEtBQ3JCbEUsRUFBSzRCLFVBQVVDLElBQUksVUFDbkI1QixFQUFTMkIsVUFBVUMsSUFBSSxVQUN2QmYsRUFBUWMsVUFBVUMsSUFBSSxTQUFTLEVBR2pDLE1BQU8sQ0FBQ1ksU0FwQ1UwQixJQUNoQkwsRUFBUXpDLFVBQVksR0FDcEJGLFNBQVNlLGNBQWMsU0FBU04sVUFBVW9DLE9BQU8sWUFFakQ3QyxTQUFTZSxjQUFjLGFBQWFrQyxjQUFnQixFQUNwRGpELFNBQVNlLGNBQWMsWUFBWWtDLGNBQWdCLEVBRW5ELElBQUlDLEVBQVNsRCxTQUFTbUQsaUJBQWlCLFNBQ3ZDLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJRixFQUFPRyxPQUFRRCxJQUNqQ0YsRUFBT0UsR0FBRzdDLE1BQVEsR0FFcEJPLEVBQWlCTCxVQUFVQyxJQUFJLFVBQy9CK0IsRUFBWTlCLFlBQWNxQyxFQUMxQk4sRUFBY2pDLFVBQVVvQyxPQUFPLFNBQVMsRUF1QnhCRCxXQUFVaEIsUUF6SVhqQyxJQUNmbUQsSUFDQTlDLFNBQVNlLGNBQWMsWUFBWVIsTUFBUVosRUFBUVIsR0FFbkQsTUFBTW1FLEVBQVN0RCxTQUFTTSxjQUFjLFVBQ3RDZ0QsRUFBTzNDLFlBQWMsU0FDckIyQyxFQUFPbEMsaUJBQWlCLFNBQVVoQixJQUNoQ0EsRUFBRW1ELGlCQUNFdkQsU0FBU2UsY0FBYyxTQUFTUixPQUNsQ2xDLEVBQVVNLFdBQVdxQixTQUFTZSxjQUFjLFNBQVNSLE1BQU9QLFNBQVNlLGNBQWMsU0FBU1IsTUFBT1AsU0FBU2UsY0FBYyxhQUFhUixNQUFPUCxTQUFTZSxjQUFjLFlBQVlSLE9BQ2pMcUMsS0FFQTVDLFNBQVNlLGNBQWMsU0FBU04sVUFBVUMsSUFBSSxXQUNoRCxJQUVGaUMsRUFBUS9CLFlBQVkwQyxHQUVwQixNQUFNRSxFQUFZeEQsU0FBU00sY0FBYyxVQUN6Q2tELEVBQVU3QyxZQUFjLFNBQ3hCNkMsRUFBVXBDLGlCQUFpQixTQUFVaEIsSUFDbkNBLEVBQUVtRCxpQkFDRlgsR0FBVSxJQUVaRCxFQUFRL0IsWUFBWTRDLEVBQVUsRUFrSEtyQixTQS9HbkJ6QyxJQUNoQm9ELElBQ0E5QyxTQUFTZSxjQUFjLFNBQVNSLE1BQVFiLEVBQVFkLEtBQ2hEb0IsU0FBU2UsY0FBYyxTQUFTUixNQUFRYixFQUFRYixLQUNoRG1CLFNBQVNlLGNBQWMsYUFBYVIsTUFBUWIsRUFBUVosU0FDcERrQixTQUFTZSxjQUFjLFlBQVlSLE1BQVFiLEVBQVFULFVBRW5ELE1BQU1xRSxFQUFTdEQsU0FBU00sY0FBYyxVQUN0Q2dELEVBQU8zQyxZQUFjLFNBQ3JCMkMsRUFBT2xDLGlCQUFpQixTQUFVaEIsSUFDaENBLEVBQUVtRCxpQkFDRmxGLEVBQVVvQixXQUFXQyxFQUFTTSxTQUFTZSxjQUFjLFNBQVNSLE1BQU9QLFNBQVNlLGNBQWMsU0FBU1IsTUFBT1AsU0FBU2UsY0FBYyxhQUFhUixNQUFPUCxTQUFTZSxjQUFjLFlBQVlSLE9BQzFMcUMsR0FBVSxJQUVaRCxFQUFRL0IsWUFBWTBDLEdBRXBCLE1BQU1HLEVBQVl6RCxTQUFTTSxjQUFjLFVBQ3pDbUQsRUFBVTlDLFlBQWMsU0FDeEI4QyxFQUFVckMsaUJBQWlCLFNBQVVoQixJQUNuQ0EsRUFBRW1ELGlCQUNGbEYsRUFBVUMsTUFBTW9GLE9BQU9yRixFQUFVQyxNQUFNcUYsUUFBUWpFLEdBQVUsR0FDekRqQixhQUFhYyxRQUFRLFFBQVNoQixLQUFLaUIsVUFBVW5CLEVBQVVDLFFBQ3ZEc0UsR0FBVSxJQUVaRCxFQUFRL0IsWUFBWTZDLEVBQVUsRUF1RmVyQixXQXBGNUIsS0FDakJXLElBQ0EsTUFBTU8sRUFBU3RELFNBQVNNLGNBQWMsVUFDdENnRCxFQUFPM0MsWUFBYyxTQUNyQjJDLEVBQU9sQyxpQkFBaUIsU0FBVWhCLElBQ2hDQSxFQUFFbUQsaUJBQ0V2RCxTQUFTZSxjQUFjLFNBQVNSLE9BQ2xDWCxFQUFheUMsY0FBY3JDLFNBQVNlLGNBQWMsU0FBU1IsT0FDM0RxQyxLQUVBNUMsU0FBU2UsY0FBYyxTQUFTTixVQUFVQyxJQUFJLFdBQ2hELElBRUZpQyxFQUFRL0IsWUFBWTBDLEdBRXBCLE1BQU1FLEVBQVl4RCxTQUFTTSxjQUFjLFVBQ3pDa0QsRUFBVTdDLFlBQWMsU0FDeEI2QyxFQUFVcEMsaUJBQWlCLFNBQVVoQixJQUNuQ0EsRUFBRW1ELGlCQUNGWCxHQUFVLElBRVpELEVBQVEvQixZQUFZNEMsRUFBVSxFQStEMkJqQyxZQTVEdEM3QixJQUNuQnFELElBQ0EvQyxTQUFTZSxjQUFjLFNBQVNSLE1BQVFiLEVBQVFkLEtBRWhELE1BQU0wRSxFQUFTdEQsU0FBU00sY0FBYyxVQUN0Q2dELEVBQU8zQyxZQUFjLFNBQ3JCMkMsRUFBT2xDLGlCQUFpQixTQUFVaEIsSUFDaENBLEVBQUVtRCxpQkFDRjNELEVBQWEwQyxjQUFjNUMsRUFBU00sU0FBU2UsY0FBYyxTQUFTUixPQUNwRXFDLEdBQVUsSUFFWkQsRUFBUS9CLFlBQVkwQyxHQUVwQixNQUFNRyxFQUFZekQsU0FBU00sY0FBYyxVQUN6Q21ELEVBQVU5QyxZQUFjLFNBQ3hCOEMsRUFBVXJDLGlCQUFpQixTQUFVaEIsSUFDbkNBLEVBQUVtRCxpQkFDRjNELEVBQWFDLFlBQVk2RCxPQUFPOUQsRUFBYUMsWUFBWThELFFBQVFqRSxHQUFVLEdBQzNFakIsYUFBYWMsUUFBUSxjQUFlaEIsS0FBS2lCLFVBQVVJLEVBQWFDLGNBQ2hFK0MsR0FBVSxJQUVaRCxFQUFRL0IsWUFBWTZDLEVBQVUsRUF3Q2pDLEVBckp5QixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG8tZG9zLy4vc3JjL3RvZG9zLmpzIiwid2VicGFjazovL3RvLWRvcy8uL3NyYy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly90by1kb3MvLi9zcmMvYnRuLWFjdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHRvRG9TdHVmZiA9ICgoKSA9PiB7XG5sZXQgdG9Eb3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9Eb3NcIikpIHx8IFtdO1xuICBjb25zdCBjcmVhdGVUb2RvID0gKG5hbWUsIGRhdGUsIHByaW9yaXR5LCBwSWQpID0+IHtcbiAgICBsZXQgcHJvamVjdElkID0gcGFyc2VJbnQocElkKTtcbiAgICBsZXQgdG9EbyA9IHtuYW1lLCBkYXRlLCBwcmlvcml0eSwgcHJvamVjdElkLCBpZDpuZXcgRGF0ZSgpLmdldFRpbWUoKX07XG4gICAgdG9Eb3MucHVzaCh0b0RvKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvRG9zXCIsIEpTT04uc3RyaW5naWZ5KHRvRG9zKSk7XG4gICAgcmV0dXJuIHt0b0Rvc307XG4gIH1cblxuICBjb25zdCB1cGRhdGVUb2RvID0gKGN1cnJlbnQsIG5hbWUsIGRhdGUsIHByaW9yaXR5LCBwcm9qZWN0KSA9PiB7XG4gICAgbGV0IHByb2plY3RJZCA9IHBhcnNlSW50KHByb2plY3QpO1xuICAgIGN1cnJlbnQubmFtZSA9IG5hbWU7XG4gICAgY3VycmVudC5kYXRlID0gZGF0ZTtcbiAgICBjdXJyZW50LnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgY3VycmVudC5wcm9qZWN0SWQgPSBwcm9qZWN0SWQ7XG4gIFxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9Eb3NcIiwgSlNPTi5zdHJpbmdpZnkodG9Eb3MpKTtcbiAgfVxuXG4gIHJldHVybiB7IGNyZWF0ZVRvZG8sIHRvRG9zLCB1cGRhdGVUb2RvIH07XG59KSgpOyIsImltcG9ydCB7IGJ0bkFjdGlvbnMgfSBmcm9tIFwiLi9idG4tYWN0aW9uc1wiO1xuaW1wb3J0IHsgdG9Eb1N0dWZmIH0gZnJvbSBcIi4vdG9kb3NcIjtcblxuZXhwb3J0IGNvbnN0IHByb2plY3RTdHVmZiA9ICgoKSA9PiB7XG4gIC8vIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICBjb25zdCBwcm9qZWN0TGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwcm9qZWN0TGlzdFwiKSkgfHwgW3tuYW1lOidQZXJzb25hbCcsIGlkOjF9XTtcbiAgXG4gIC8vYWRkIHByb2plY3QgdG8gZHJvcC1kb3duXG4gIGNvbnN0IHBvcHVsYXRlUHJvamVjdERyb3BEb3duID0gKCkgPT4ge1xuICAgIGNvbnN0IHByb2plY3RTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdCcpO1xuICAgIHByb2plY3RTZWxlY3QuaW5uZXJIVE1MID0gXCJcIjtcbiAgICBwcm9qZWN0TGlzdC5mb3JFYWNoKChlKSA9PiB7XG4gICAgICBjb25zdCBwcm9qZWN0T3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICBwcm9qZWN0T3B0aW9uLnZhbHVlID0gZS5pZDtcbiAgICAgIHByb2plY3RPcHRpb24uc2V0QXR0cmlidXRlKCdkYXRhc2V0JywgZS5pZCk7XG4gICAgICBwcm9qZWN0T3B0aW9uLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3Qtb3B0aW9uJyk7XG4gICAgICBwcm9qZWN0T3B0aW9uLnRleHRDb250ZW50ID0gZS5uYW1lO1xuICAgICAgcHJvamVjdFNlbGVjdC5hcHBlbmRDaGlsZChwcm9qZWN0T3B0aW9uKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vc2hvdyBwcm9qZWN0IG5hbWUgb24gcGFnZVxuICBjb25zdCBkaXNwbGF5UHJvamVjdCA9ICgpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtY29udGFpbmVyJyk7XG4gICAgcHJvamVjdENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICBcbiAgICBwcm9qZWN0TGlzdC5mb3JFYWNoKChlKSA9PiB7XG4gICAgICBjb25zdCBwcm9qZWN0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7IFxuICAgICAgcHJvamVjdERpdi5jbGFzc05hbWUgPSBcInByb2plY3QtZGl2XCI7XG4gICAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICBwcm9qZWN0TmFtZS5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LW5hbWUnKTtcbiAgICAgIGNvbnN0IGVkaXRJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgZWRpdEljb24uY2xhc3NMaXN0LmFkZCAoJ21hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQnLCAnZWRpdCcpO1xuICAgICAgZWRpdEljb24udGV4dENvbnRlbnQgPSAnZWRpdCc7XG4gICAgICBlZGl0SWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgYnRuQWN0aW9ucy5zaG93Rm9ybShgRWRpdCBQcm9qZWN0IE5hbWVgKTtcbiAgICAgICAgYnRuQWN0aW9ucy5lZGl0UHJvamVjdChlKTtcbiAgICAgIH0sIHtvbmNlOiB0cnVlfSk7XG5cbiAgICAgIC8vdG9kbyBidXR0b25cbiAgICAgIGNvbnN0IG5ld1RvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgIG5ld1RvZG8uY2xhc3NMaXN0LmFkZCgnYWRkLXRvZG8nLCAncHJvamVjdC1pY29uJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvblRleHRUb2RvID0gJ0FkZCBUbyBEbydcbiAgICAgIGNvbnN0IG5ld0ljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBuZXdJY29uLmNsYXNzTGlzdC5hZGQgKCdtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkJywgJ2VkaXQnKTtcbiAgICAgIG5ld0ljb24udGV4dENvbnRlbnQgPSAnYWRkJztcblxuICAgICAgbmV3VG9kby5hcHBlbmQobmV3SWNvbiwgYnV0dG9uVGV4dFRvZG8pO1xuICAgICAgbmV3VG9kby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgYnRuQWN0aW9ucy5zaG93Rm9ybSgnQ3JlYXRlIE5ldyBJdGVtJylcbiAgICAgICAgYnRuQWN0aW9ucy5uZXdUb0RvKGUpO1xuICAgICAgfSwge29uY2U6IHRydWV9KTtcblxuICAgICAgcHJvamVjdE5hbWUudGV4dENvbnRlbnQgPSBlLm5hbWU7XG4gICAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3REaXYpO1xuICAgICAgcHJvamVjdERpdi5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZSk7XG4gICAgICBwcm9qZWN0TmFtZS5hcHBlbmRDaGlsZChlZGl0SWNvbik7XG4gICAgICBwcm9qZWN0RGl2LmFwcGVuZENoaWxkKG5ld1RvZG8pO1xuXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RMaXN0XCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RMaXN0KSk7XG4gICAgICBcbiAgICAgIHRvRG9TdHVmZi50b0Rvcy5mb3JFYWNoKCh0KSA9PiB7ICBcbiAgICAgICAgaWYgKHQucHJvamVjdElkID09PSBlLmlkKSB7XG4gICAgICAgICAgY29uc3QgdG9Eb0l0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICB0b0RvSXRlbS5jbGFzc0xpc3QuYWRkKCd0by1kby1pdGVtJyk7XG4gICAgICAgICAgdG9Eb0l0ZW0uc2V0QXR0cmlidXRlKCdpZCcsIHQuaWQpO1xuICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKVxuICAgICAgICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcbiAgICAgICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNoZWNrYm94XCIpO1xuICAgICAgICAgIGNvbnN0IHRvRG9OYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgIHRvRG9OYW1lLnRleHRDb250ZW50ID0gdC5uYW1lO1xuICAgICAgICAgIGNvbnN0IHRvRG9Qcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICB0b0RvUHJpb3JpdHkudGV4dENvbnRlbnQgPSB0LnByaW9yaXR5O1xuICAgICAgICAgIGNvbnN0IHRvRG9EYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgIHRvRG9EYXRlLnRleHRDb250ZW50ID0gdC5kYXRlO1xuICAgICAgICAgIGNvbnN0IGVkaXRJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgIGVkaXRJY29uLmNsYXNzTGlzdC5hZGQgKCdtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkJywgJ2VkaXQnKTtcbiAgICAgICAgICBlZGl0SWNvbi50ZXh0Q29udGVudCA9ICdlZGl0JztcbiAgICAgICAgICBlZGl0SWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGJ0bkFjdGlvbnMuc2hvd0Zvcm0oJ0VkaXQgVG8gRG8nKVxuICAgICAgICAgICAgYnRuQWN0aW9ucy5lZGl0VG9Ebyh0KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHByb2plY3REaXYuYXBwZW5kQ2hpbGQodG9Eb0l0ZW0pO1xuICAgICAgICAgIHRvRG9JdGVtLmFwcGVuZChjaGVja2JveCwgdG9Eb05hbWUsIHRvRG9Qcmlvcml0eSwgdG9Eb0RhdGUsIGVkaXRJY29uKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgLy9uZXcgcHJvamVjdCBidXR0b25cbiAgICBjb25zdCBuZXdQcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgbmV3UHJvamVjdC5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWljb24nKTtcbiAgICBcbiAgICBjb25zdCBidXR0b25UZXh0ID0gJ0NyZWF0ZSBOZXcgTGlzdCdcbiAgICBjb25zdCBuZXdJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIG5ld0ljb24uY2xhc3NMaXN0LmFkZCAoJ21hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQnLCAnZWRpdCcpO1xuICAgIG5ld0ljb24udGV4dENvbnRlbnQgPSAnYWRkJztcblxuICAgIG5ld1Byb2plY3QuYXBwZW5kKG5ld0ljb24sIGJ1dHRvblRleHQpO1xuICAgIHByb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQobmV3UHJvamVjdCk7XG4gICAgbmV3UHJvamVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGJ0bkFjdGlvbnMuc2hvd0Zvcm0oJ0NyZWF0ZSBOZXcgTGlzdCcpO1xuICAgICAgYnRuQWN0aW9ucy5uZXdQcm9qZWN0KCk7XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBjcmVhdGVQcm9qZWN0ID0gKG5hbWUpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0ID0ge25hbWUsIGlkOm5ldyBEYXRlKCkuZ2V0VGltZSgpfVxuICAgIHByb2plY3RMaXN0LnB1c2gocHJvamVjdCk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0TGlzdFwiLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0TGlzdCkpO1xuICAgIHBvcHVsYXRlUHJvamVjdERyb3BEb3duKCk7XG4gIH1cblxuICBjb25zdCB1cGRhdGVQcm9qZWN0ID0gKGN1cnJlbnQsIG5ld05hbWUpID0+IHtcbiAgICBjdXJyZW50Lm5hbWUgPSBuZXdOYW1lO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdExpc3RcIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdExpc3QpKTtcbiAgICBwb3B1bGF0ZVByb2plY3REcm9wRG93bigpO1xuICB9XG4gICAgICBcbiAgZGlzcGxheVByb2plY3QoKTtcbiAgcG9wdWxhdGVQcm9qZWN0RHJvcERvd24oKTtcbiAgXG4gIHJldHVybiB7Y3JlYXRlUHJvamVjdCwgcHJvamVjdExpc3QsIHVwZGF0ZVByb2plY3QsIGRpc3BsYXlQcm9qZWN0fVxufSkoKTsiLCJpbXBvcnQgeyBwcm9qZWN0U3R1ZmYgfSBmcm9tIFwiLi9wcm9qZWN0c1wiO1xuaW1wb3J0IHsgdG9Eb1N0dWZmIH0gZnJvbSBcIi4vdG9kb3NcIjtcblxuZXhwb3J0IGNvbnN0IGJ0bkFjdGlvbnMgPSAoKCkgPT4ge1xuICBjb25zdCB0b2RvSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG9kbycpO1xuICBjb25zdCBmb3JtTWVzc2FnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtLW1lc3NhZ2UnKTtcbiAgY29uc3QgZm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWNvbnRhaW5lcicpO1xuICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtY29udGFpbmVyJyk7XG4gIFxuICBjb25zdCBkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUnKTtcbiAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJpb3JpdHknKTtcbiAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LXNlbGVjdCcpO1xuICBjb25zdCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbnMnKTtcblxuICBjb25zdCBuZXdUb0RvID0gKHByb2plY3QpID0+IHtcbiAgICBzaG93Rm9ybUlucHV0cygpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0JykudmFsdWUgPSBwcm9qZWN0LmlkO1xuXG4gICAgY29uc3Qgc3ViQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgc3ViQnRuLnRleHRDb250ZW50ID0gXCJTdWJtaXRcIjtcbiAgICBzdWJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUpIHtcbiAgICAgICAgdG9Eb1N0dWZmLmNyZWF0ZVRvZG8oZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKS52YWx1ZSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKS52YWx1ZSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaW9yaXR5JykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0JykudmFsdWUpO1xuICAgICAgICBoaWRlRm9ybSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKS5jbGFzc0xpc3QuYWRkKFwicmVxdWlyZWRcIik7XG4gICAgICB9XG4gICAgfSlcbiAgICBidXR0b25zLmFwcGVuZENoaWxkKHN1YkJ0bik7XG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBjYW5jZWxCdG4udGV4dENvbnRlbnQgPSBcIkNhbmNlbFwiXG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGhpZGVGb3JtKCk7XG4gICAgfSk7XG4gICAgYnV0dG9ucy5hcHBlbmRDaGlsZChjYW5jZWxCdG4pO1xuICB9IFxuICBcbiAgY29uc3QgZWRpdFRvRG8gPSAoY3VycmVudCkgPT4geyBcbiAgICBzaG93Rm9ybUlucHV0cygpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUgPSBjdXJyZW50Lm5hbWU7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKS52YWx1ZSA9IGN1cnJlbnQuZGF0ZTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKS52YWx1ZSA9IGN1cnJlbnQucHJpb3JpdHk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QnKS52YWx1ZSA9IGN1cnJlbnQucHJvamVjdElkO1xuXG4gICAgY29uc3Qgc3ViQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgc3ViQnRuLnRleHRDb250ZW50ID0gXCJVcGRhdGVcIjtcbiAgICBzdWJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdG9Eb1N0dWZmLnVwZGF0ZVRvZG8oY3VycmVudCwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKS52YWx1ZSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKS52YWx1ZSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaW9yaXR5JykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0JykudmFsdWUpO1xuICAgICAgaGlkZUZvcm0oKTtcbiAgICB9KTtcbiAgICBidXR0b25zLmFwcGVuZENoaWxkKHN1YkJ0bik7XG5cbiAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiXG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRvRG9TdHVmZi50b0Rvcy5zcGxpY2UodG9Eb1N0dWZmLnRvRG9zLmluZGV4T2YoY3VycmVudCksIDEpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b0Rvc1wiLCBKU09OLnN0cmluZ2lmeSh0b0RvU3R1ZmYudG9Eb3MpKTtcbiAgICAgIGhpZGVGb3JtKCk7XG4gICAgfSk7XG4gICAgYnV0dG9ucy5hcHBlbmRDaGlsZChkZWxldGVCdG4pO1xuICB9IFxuXG4gIGNvbnN0IG5ld1Byb2plY3QgPSAoKSA9PiB7XG4gICAgaGlkZUZvcm1JbnB1dHMoKTtcbiAgICBjb25zdCBzdWJCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBzdWJCdG4udGV4dENvbnRlbnQgPSBcIlN1Ym1pdFwiO1xuICAgIHN1YkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKS52YWx1ZSkge1xuICAgICAgICBwcm9qZWN0U3R1ZmYuY3JlYXRlUHJvamVjdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpLnZhbHVlKTtcbiAgICAgICAgaGlkZUZvcm0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykuY2xhc3NMaXN0LmFkZChcInJlcXVpcmVkXCIpO1xuICAgICAgfVxuICAgIH0pXG4gICAgYnV0dG9ucy5hcHBlbmRDaGlsZChzdWJCdG4pXG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBjYW5jZWxCdG4udGV4dENvbnRlbnQgPSBcIkNhbmNlbFwiXG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGhpZGVGb3JtKCk7XG4gICAgfSk7XG4gICAgYnV0dG9ucy5hcHBlbmRDaGlsZChjYW5jZWxCdG4pO1xuICB9IFxuXG4gIGNvbnN0IGVkaXRQcm9qZWN0ID0gKGN1cnJlbnQpID0+IHsgXG4gICAgaGlkZUZvcm1JbnB1dHMoKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpLnZhbHVlID0gY3VycmVudC5uYW1lO1xuICAgIFxuICAgIGNvbnN0IHN1YkJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHN1YkJ0bi50ZXh0Q29udGVudCA9IFwiVXBkYXRlXCI7XG4gICAgc3ViQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHByb2plY3RTdHVmZi51cGRhdGVQcm9qZWN0KGN1cnJlbnQsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUpO1xuICAgICAgaGlkZUZvcm0oKTtcbiAgICB9KTtcbiAgICBidXR0b25zLmFwcGVuZENoaWxkKHN1YkJ0bik7XG4gICAgXG4gICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gXCJEZWxldGVcIlxuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBwcm9qZWN0U3R1ZmYucHJvamVjdExpc3Quc3BsaWNlKHByb2plY3RTdHVmZi5wcm9qZWN0TGlzdC5pbmRleE9mKGN1cnJlbnQpLCAxKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdExpc3RcIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdFN0dWZmLnByb2plY3RMaXN0KSk7XG4gICAgICBoaWRlRm9ybSgpO1xuICAgIH0pO1xuICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoZGVsZXRlQnRuKTtcbiAgfVxuICBcbiAgY29uc3Qgc2hvd0Zvcm0gPSAobXNnKSA9PiB7XG4gICAgYnV0dG9ucy5pbm5lckhUTUwgPSBcIlwiO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykuY2xhc3NMaXN0LnJlbW92ZShcInJlcXVpcmVkXCIpO1xuICAgICAgLy9yZXNldCBwcmlvcml0eSBhbmQgcHJvamVjdFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpLnNlbGVjdGVkSW5kZXggPSAwO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0Jykuc2VsZWN0ZWRJbmRleCA9IDA7XG4gICAgLy8gcmVzZXQgaW5wdXRzXG4gICAgbGV0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0Jyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlucHV0c1tpXS52YWx1ZSA9IFwiXCI7XG4gICAgfVxuICAgIHByb2plY3RDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgZm9ybU1lc3NhZ2UudGV4dENvbnRlbnQgPSBtc2c7XG4gICAgZm9ybUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgfSBcblxuICBjb25zdCBoaWRlRm9ybSA9ICgpID0+IHtcbiAgICB0b2RvSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICBmb3JtTWVzc2FnZS50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZm9ybUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBwcm9qZWN0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIHByb2plY3RTdHVmZi5kaXNwbGF5UHJvamVjdCgpO1xuICB9XG5cbiAgY29uc3Qgc2hvd0Zvcm1JbnB1dHMgPSAoKSA9PiB7XG4gICAgZGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICBwcmlvcml0eS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICBwcm9qZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICB9XG5cbiAgY29uc3QgaGlkZUZvcm1JbnB1dHMgPSAoKSA9PiB7XG4gICAgZGF0ZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBwcmlvcml0eS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBwcm9qZWN0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICB9XG5cbiAgcmV0dXJuIHtzaG93Rm9ybSwgaGlkZUZvcm0sIG5ld1RvRG8sIGVkaXRUb0RvLCBuZXdQcm9qZWN0LCBlZGl0UHJvamVjdH1cbn0pKCk7XG5cbiAgIl0sIm5hbWVzIjpbInRvRG9TdHVmZiIsInRvRG9zIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNyZWF0ZVRvZG8iLCJuYW1lIiwiZGF0ZSIsInByaW9yaXR5IiwicElkIiwidG9EbyIsInByb2plY3RJZCIsInBhcnNlSW50IiwiaWQiLCJEYXRlIiwiZ2V0VGltZSIsInB1c2giLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwidXBkYXRlVG9kbyIsImN1cnJlbnQiLCJwcm9qZWN0IiwicHJvamVjdFN0dWZmIiwicHJvamVjdExpc3QiLCJwb3B1bGF0ZVByb2plY3REcm9wRG93biIsInByb2plY3RTZWxlY3QiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwiZm9yRWFjaCIsImUiLCJwcm9qZWN0T3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsInZhbHVlIiwic2V0QXR0cmlidXRlIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImRpc3BsYXlQcm9qZWN0IiwicHJvamVjdENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9qZWN0RGl2IiwiY2xhc3NOYW1lIiwicHJvamVjdE5hbWUiLCJlZGl0SWNvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJidG5BY3Rpb25zIiwic2hvd0Zvcm0iLCJlZGl0UHJvamVjdCIsIm9uY2UiLCJuZXdUb2RvIiwibmV3SWNvbiIsImFwcGVuZCIsIm5ld1RvRG8iLCJ0IiwidG9Eb0l0ZW0iLCJjaGVja2JveCIsInRvRG9OYW1lIiwidG9Eb1ByaW9yaXR5IiwidG9Eb0RhdGUiLCJlZGl0VG9EbyIsIm5ld1Byb2plY3QiLCJjcmVhdGVQcm9qZWN0IiwidXBkYXRlUHJvamVjdCIsIm5ld05hbWUiLCJ0b2RvSWNvbiIsImZvcm1NZXNzYWdlIiwiZm9ybUNvbnRhaW5lciIsImJ1dHRvbnMiLCJoaWRlRm9ybSIsInJlbW92ZSIsInNob3dGb3JtSW5wdXRzIiwiaGlkZUZvcm1JbnB1dHMiLCJtc2ciLCJzZWxlY3RlZEluZGV4IiwiaW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImkiLCJsZW5ndGgiLCJzdWJCdG4iLCJwcmV2ZW50RGVmYXVsdCIsImNhbmNlbEJ0biIsImRlbGV0ZUJ0biIsInNwbGljZSIsImluZGV4T2YiXSwic291cmNlUm9vdCI6IiJ9