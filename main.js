(()=>{"use strict";const e=(()=>{let e=JSON.parse(localStorage.getItem("toDos"))||[];return{createTodo:(o,n,c,r)=>{let d={name:o,date:n,priority:c,projectName:r,id:(new Date).getTime()};return e.push(d),localStorage.setItem("toDos",JSON.stringify(e)),t.displayProject(),{toDos:e}},toDos:e,updateTodo:(o,n,c,r,d)=>{o.name=n,o.date=c,o.priority=r,o.projectName=d,localStorage.setItem("toDos",JSON.stringify(e)),t.displayProject()}}})(),t=(()=>{const t=JSON.parse(localStorage.getItem("projectList"))||[{name:"Personal",id:1}],n=()=>{const e=document.getElementById("project");e.innerHTML="",t.forEach((t=>{const o=document.createElement("option");o.value=t.id,o.setAttribute("dataset",t.id),o.classList.add("project-option"),o.textContent=t.name,e.appendChild(o)}))},c=()=>{const n=document.querySelector(".project-container");n.innerHTML="",t.forEach((c=>{const r=document.createElement("div");r.className="project-div";const d=document.createElement("h2");d.classList.add("project-name");const a=document.createElement("span");a.classList.add("material-symbols-outlined","edit"),a.textContent="edit",a.addEventListener("click",(()=>{o.showForm("Edit Project Name"),o.editProject(c)}),{once:!0});const s=document.createElement("button");s.classList.add("add-todo","project-button");const l=document.createElement("span");l.classList.add("material-symbols-outlined","edit"),l.textContent="add",s.append(l,"Add To Do"),s.addEventListener("click",(()=>{o.showForm("Create New Item"),o.newToDo(c)}),{once:!0}),d.textContent=c.name,n.appendChild(r),r.appendChild(d),d.appendChild(a),r.appendChild(s),localStorage.setItem("projectList",JSON.stringify(t)),e.toDos.forEach((e=>{if(e.projectName===c.id){const t=document.createElement("div");t.classList.add("to-do-item"),t.setAttribute("id",e.id);const n=document.createElement("input");n.setAttribute("type","checkbox");const c=document.createElement("span");c.textContent=e.name;const d=document.createElement("span");d.textContent=e.priority;const a=document.createElement("span");a.textContent=e.date;const s=document.createElement("span");s.classList.add("material-symbols-outlined","edit"),s.textContent="edit",s.addEventListener("click",(()=>{document.querySelector("#name").value=e.name,document.querySelector("#date").value=e.date,document.querySelector("#priority").value=e.priority,document.querySelector("#project").value=e.projectName,o.showForm("Edit To Do"),o.editToDo(e)})),r.appendChild(t),t.append(n,c,d,a,s)}}))}));const c=document.createElement("button");c.classList.add("project-button");const r=document.createElement("span");r.classList.add("material-symbols-outlined","edit"),r.textContent="add",c.append(r,"Create New List"),n.appendChild(c),c.addEventListener("click",(()=>{o.showForm("Create New List"),o.newProject()}))};return c(),n(),{createProject:e=>{const o={name:e,id:(new Date).getTime()};t.push(o),localStorage.setItem("projectList",JSON.stringify(t)),n(),c()},projectList:t,updateProject:(e,o)=>{e.name=o,console.log(e),localStorage.setItem("projectList",JSON.stringify(t)),c(),n()},displayProject:c}})(),o=(()=>{const o=document.querySelector(".add-todo"),n=document.querySelector("#form-message"),c=document.querySelector(".form-container"),r=document.querySelector(".project-container"),d=document.querySelector(".date"),a=document.querySelector(".priority"),s=document.querySelector(".project-select"),l=document.querySelector(".submit-btn"),i=document.querySelector(".cancel-btn"),u=document.querySelector(".buttons"),m=(e,o)=>{console.log(o,"current"),console.log(t.projectList),e.preventDefault(),t.projectList.splice(t.projectList.indexOf(o),1),console.log(t.projectList),localStorage.setItem("projectList",JSON.stringify(t.projectList)),t.displayProject(),S()},p=()=>{d.classList.remove("hidden"),a.classList.remove("hidden"),s.classList.remove("hidden")},y=()=>{d.classList.add("hidden"),a.classList.add("hidden"),s.classList.add("hidden")},S=()=>{o.classList.remove("hidden"),n.textContent="",c.classList.add("hidden"),r.classList.remove("hidden")};return{showForm:e=>{u.innerHTML="",document.querySelector("#priority").selectedIndex=0,document.querySelector("#project").selectedIndex=0;let t=document.querySelectorAll("input");for(let e=0;e<t.length;e++)t[e].value="";r.classList.add("hidden"),n.textContent=e,c.classList.remove("hidden")},hideForm:S,newToDo:t=>{p(),document.querySelector("#project").value=t.id,l.addEventListener("click",(t=>{t.preventDefault(),e.createTodo(document.querySelector("#name").value,document.querySelector("#date").value,document.querySelector("#priority").value,document.querySelector("#project").value),S()}),{once:!0})},editToDo:o=>{p(),l.textContent="Update",l.addEventListener("click",(t=>{t.preventDefault(),e.updateTodo(o,document.querySelector("#name").value,document.querySelector("#date").value,document.querySelector("#priority").value,document.querySelector("#project").value),S()}),{once:!0}),i.textContent="Delete",i.addEventListener("click",(n=>{n.preventDefault(),e.toDos.splice(e.toDos.indexOf(o),1),localStorage.setItem("toDos",JSON.stringify(e.toDos)),t.displayProject(),S()}),{once:!0})},newProject:()=>{y();const e=document.createElement("button");e.textContent="Submit",e.addEventListener("click",(e=>{e.preventDefault(),t.createProject(document.querySelector("#name").value),S()}),{once:!0}),u.appendChild(e)},editProject:e=>{y(),document.querySelector("#name").value=e.name;const o=document.createElement("button");o.textContent="Update",o.addEventListener("click",(o=>{o.preventDefault(),t.updateProject(e,document.querySelector("#name").value),console.log(t.projectList),S()}),{once:!0}),u.appendChild(o);const n=document.createElement("button");n.textContent="Delete",n.addEventListener("click",(t=>m(t,e)),{once:!0}),u.appendChild(n)},deleteProject:m}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2s6Ly90by1kb3MvLi9zcmMvdG9kb3MuanMiLCJ3ZWJwYWNrOi8vdG8tZG9zLy4vc3JjL3Byb2plY3RzLmpzIiwid2VicGFjazovL3RvLWRvcy8uL3NyYy9idG4tYWN0aW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcm9qZWN0U3R1ZmYgfSBmcm9tIFwiLi9wcm9qZWN0c1wiO1xuaW1wb3J0IHsgYnRuQWN0aW9ucyB9IGZyb20gXCIuL2J0bi1hY3Rpb25zXCI7XG5cbmV4cG9ydCBjb25zdCB0b0RvU3R1ZmYgPSAoKCkgPT4ge1xubGV0IHRvRG9zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRvRG9zXCIpKSB8fCBbXTtcbiAgY29uc3QgY3JlYXRlVG9kbyA9IChuYW1lLCBkYXRlLCBwcmlvcml0eSwgcHJvamVjdE5hbWUpID0+IHtcbiAgICBsZXQgdG9EbyA9IHtuYW1lLCBkYXRlLCBwcmlvcml0eSwgcHJvamVjdE5hbWUsIGlkOm5ldyBEYXRlKCkuZ2V0VGltZSgpfTtcbiAgICB0b0Rvcy5wdXNoKHRvRG8pO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9Eb3NcIiwgSlNPTi5zdHJpbmdpZnkodG9Eb3MpKTtcbiAgICBwcm9qZWN0U3R1ZmYuZGlzcGxheVByb2plY3QoKTtcblxuICAgIHJldHVybiB7dG9Eb3N9O1xuICB9XG5cbiAgLy8gY29uc3QgYXR0YWNoVG9Qcm9qZWN0ID0gKHRvRG8sIHByb2plY3ROYW1lKSA9PiB7XG4gIC8vICAgcHJvamVjdFN0dWZmLnByb2plY3RMaXN0LmZvckVhY2goKGUpID0+IHtcbiAgLy8gICAgIGlmIChwcm9qZWN0TmFtZSA9PT0gZSkge1xuICAvLyAgICAgICBsZXQgcHJvamVjdEFycmF5O1xuICAvLyAgICAgICBwcm9qZWN0QXJyYXkucHVzaCh0b0RvKTtcbiAgLy8gICAgICAgY29uc29sZS5sb2cocHJvamVjdEFycmF5KTtcbiAgLy8gICAgICAgLy8gY29uc3QgY2xhc3NOYW1lID0gZS5yZXBsYWNlKC9cXHMrL2csICctJykudG9Mb3dlckNhc2UoKTtcbiAgLy8gICAgICAgLy8gY29uc29sZS5sb2coY2xhc3NOYW1lKVxuICAvLyAgICAgICAvLyBjb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2NsYXNzTmFtZX1gKTtcbiAgLy8gICAgICAgLy8gY29uc3QgdG9Eb0l0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIC8vICAgICAgIC8vIHRvRG9JdGVtLnRleHRDb250ZW50ID0gdG9Eby5uYW1lO1xuXG4gIC8vICAgICAgIC8vIHByb2plY3ROYW1lLmFwcGVuZENoaWxkKHRvRG9JdGVtKTtcbiAgLy8gICAgICAgLy8gY29uc29sZS5sb2coZSwgcHJvamVjdE5hbWUpXG4gIC8vICAgICB9XG4gIC8vICAgfSlcblxuICAvLyAgIHByb2plY3RTdHVmZi5wcm9qZWN0TGlzdC5mb3JFYWNoKChlKSA9PiB7XG4gIC8vICAgICBpZiAocHJvamVjdE5hbWUgPT09IGUpO1xuICAvLyAgICAgcHJvamVjdFN0dWZmLmNyZWF0ZVByb2plY3QuZS5wdXNoKHRvRG8pO1xuICAvLyAgICAgICAvLyBlLnB1c2godG9Ebyk7XG4gIC8vICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RTdHVmZi5jcmVhdGVQcm9qZWN0LnByb2plY3RBcnJheSk7XG4gIC8vICAgfSlcbiAgXG4gIC8vIH1cblxuICBjb25zdCB1cGRhdGVUb2RvID0gKGN1cnJlbnQsIG5hbWUsIGRhdGUsIHByaW9yaXR5LCBwcm9qZWN0KSA9PiB7XG4gICAgY3VycmVudC5uYW1lID0gbmFtZTtcbiAgICBjdXJyZW50LmRhdGUgPSBkYXRlO1xuICAgIGN1cnJlbnQucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICBjdXJyZW50LnByb2plY3ROYW1lID0gcHJvamVjdDtcbiAgXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b0Rvc1wiLCBKU09OLnN0cmluZ2lmeSh0b0RvcykpO1xuICAgIHByb2plY3RTdHVmZi5kaXNwbGF5UHJvamVjdCgpO1xuICB9XG5cbiAgcmV0dXJuIHsgY3JlYXRlVG9kbywgdG9Eb3MsIHVwZGF0ZVRvZG8gfTtcbn0pKCk7IiwiaW1wb3J0IHsgYnRuQWN0aW9ucyB9IGZyb20gXCIuL2J0bi1hY3Rpb25zXCI7XG5pbXBvcnQgeyB0b0RvU3R1ZmYgfSBmcm9tIFwiLi90b2Rvc1wiO1xuXG5leHBvcnQgY29uc3QgcHJvamVjdFN0dWZmID0gKCgpID0+IHtcbiAgLy8gbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gIGNvbnN0IHByb2plY3RMaXN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInByb2plY3RMaXN0XCIpKSB8fCBbe25hbWU6J1BlcnNvbmFsJywgaWQ6MX1dO1xuICBcbiAgXG4gIC8vYWRkIHByb2plY3QgdG8gZHJvcC1kb3duXG4gIGNvbnN0IHBvcHVsYXRlUHJvamVjdERyb3BEb3duID0gKCkgPT4ge1xuICAgIGNvbnN0IHByb2plY3RTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdCcpO1xuICAgIHByb2plY3RTZWxlY3QuaW5uZXJIVE1MID0gXCJcIjtcbiAgICBwcm9qZWN0TGlzdC5mb3JFYWNoKChlKSA9PiB7XG4gICAgICBjb25zdCBwcm9qZWN0T3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICBwcm9qZWN0T3B0aW9uLnZhbHVlID0gZS5pZDtcbiAgICAgIHByb2plY3RPcHRpb24uc2V0QXR0cmlidXRlKCdkYXRhc2V0JywgZS5pZCk7XG4gICAgICBwcm9qZWN0T3B0aW9uLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3Qtb3B0aW9uJyk7XG4gICAgICBwcm9qZWN0T3B0aW9uLnRleHRDb250ZW50ID0gZS5uYW1lO1xuICAgICAgcHJvamVjdFNlbGVjdC5hcHBlbmRDaGlsZChwcm9qZWN0T3B0aW9uKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vc2hvdyBwcm9qZWN0IG5hbWUgb24gcGFnZVxuICBjb25zdCBkaXNwbGF5UHJvamVjdCA9ICgpID0+IHtcbiAgICAvLyBjb25zdCBwcm9qZWN0Q29udGFpbmVyMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWNvbnRhaW5lcicpO1xuICAgIC8vIHByb2plY3RDb250YWluZXIxLnJlcGxhY2VXaXRoKHByb2plY3RDb250YWluZXIxLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgXG4gICAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWNvbnRhaW5lcicpO1xuICAgIHByb2plY3RDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICBcbiAgICAvLyByZWZyZXNoRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAvLyAgICAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IHByb2plY3RDb250YWluZXIxLmNsb25lTm9kZSh0cnVlKTtcbi8vIHByb2plY3RDb250YWluZXIxLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHByb2plY3RDb250YWluZXIsIHByb2plY3RDb250YWluZXIxKTtcblxuICAgIHByb2plY3RMaXN0LmZvckVhY2goKGUpID0+IHtcbiAgICAgIGNvbnN0IHByb2plY3REaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIC8vIHByb2plY3REaXYuZGF0YXNldC5wcm9qZWN0ID0gZS5yZXBsYWNlKC9cXHMrL2csICctJykudG9Mb3dlckNhc2UoKTtcbiAgICAgIHByb2plY3REaXYuY2xhc3NOYW1lID0gXCJwcm9qZWN0LWRpdlwiO1xuICAgICAgY29uc3QgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgcHJvamVjdE5hbWUuY2xhc3NMaXN0LmFkZCgncHJvamVjdC1uYW1lJyk7XG4gICAgICBjb25zdCBlZGl0SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIGVkaXRJY29uLmNsYXNzTGlzdC5hZGQgKCdtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkJywgJ2VkaXQnKTtcbiAgICAgIGVkaXRJY29uLnRleHRDb250ZW50ID0gJ2VkaXQnO1xuICAgICAgZWRpdEljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGJ0bkFjdGlvbnMuc2hvd0Zvcm0oYEVkaXQgUHJvamVjdCBOYW1lYCk7XG4gICAgICAgIGJ0bkFjdGlvbnMuZWRpdFByb2plY3QoZSk7XG4gICAgICB9LCB7b25jZTogdHJ1ZX0pO1xuXG4gICAgICAvL3RvZG8gYnV0dG9uXG4gICAgICBjb25zdCBuZXdUb2RvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICBuZXdUb2RvLmNsYXNzTGlzdC5hZGQoJ2FkZC10b2RvJywgJ3Byb2plY3QtYnV0dG9uJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvblRleHRUb2RvID0gJ0FkZCBUbyBEbydcbiAgICAgIGNvbnN0IG5ld0ljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBuZXdJY29uLmNsYXNzTGlzdC5hZGQgKCdtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkJywgJ2VkaXQnKTtcbiAgICAgIG5ld0ljb24udGV4dENvbnRlbnQgPSAnYWRkJztcblxuICAgICAgbmV3VG9kby5hcHBlbmQobmV3SWNvbiwgYnV0dG9uVGV4dFRvZG8pO1xuICAgICAgbmV3VG9kby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgYnRuQWN0aW9ucy5zaG93Rm9ybSgnQ3JlYXRlIE5ldyBJdGVtJylcbiAgICAgICAgYnRuQWN0aW9ucy5uZXdUb0RvKGUpO1xuICAgICAgfSwge29uY2U6IHRydWV9KTtcblxuICAgICAgcHJvamVjdE5hbWUudGV4dENvbnRlbnQgPSBlLm5hbWU7XG4gICAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3REaXYpO1xuICAgICAgcHJvamVjdERpdi5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZSk7XG4gICAgICBwcm9qZWN0TmFtZS5hcHBlbmRDaGlsZChlZGl0SWNvbik7XG4gICAgICBwcm9qZWN0RGl2LmFwcGVuZENoaWxkKG5ld1RvZG8pO1xuXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RMaXN0XCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RMaXN0KSk7XG4gICAgICB0b0RvU3R1ZmYudG9Eb3MuZm9yRWFjaCgodCkgPT4ge1xuICAgICAgICBpZiAodC5wcm9qZWN0TmFtZSA9PT0gZS5pZCkge1xuICAgICAgICAgIGNvbnN0IHRvRG9JdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgdG9Eb0l0ZW0uY2xhc3NMaXN0LmFkZCgndG8tZG8taXRlbScpO1xuICAgICAgICAgIHRvRG9JdGVtLnNldEF0dHJpYnV0ZSgnaWQnLCB0LmlkKTtcbiAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcbiAgICAgICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XG4gICAgICAgICAgY29uc3QgdG9Eb05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgdG9Eb05hbWUudGV4dENvbnRlbnQgPSB0Lm5hbWU7XG4gICAgICAgICAgY29uc3QgdG9Eb1ByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgIHRvRG9Qcmlvcml0eS50ZXh0Q29udGVudCA9IHQucHJpb3JpdHk7XG4gICAgICAgICAgY29uc3QgdG9Eb0RhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgdG9Eb0RhdGUudGV4dENvbnRlbnQgPSB0LmRhdGU7XG4gICAgICAgICAgY29uc3QgZWRpdEljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgZWRpdEljb24uY2xhc3NMaXN0LmFkZCAoJ21hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQnLCAnZWRpdCcpO1xuICAgICAgICAgIGVkaXRJY29uLnRleHRDb250ZW50ID0gJ2VkaXQnO1xuICAgICAgICAgIGVkaXRJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKS52YWx1ZSA9IHQubmFtZTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJykudmFsdWUgPSB0LmRhdGU7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKS52YWx1ZSA9IHQucHJpb3JpdHk7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdCcpLnZhbHVlID0gdC5wcm9qZWN0TmFtZTtcbiAgICAgICAgICAgIGJ0bkFjdGlvbnMuc2hvd0Zvcm0oJ0VkaXQgVG8gRG8nKVxuICAgICAgICAgICAgYnRuQWN0aW9ucy5lZGl0VG9Ebyh0KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHByb2plY3REaXYuYXBwZW5kQ2hpbGQodG9Eb0l0ZW0pO1xuICAgICAgICAgIHRvRG9JdGVtLmFwcGVuZChjaGVja2JveCwgdG9Eb05hbWUsIHRvRG9Qcmlvcml0eSwgdG9Eb0RhdGUsIGVkaXRJY29uKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgIH0pXG5cbiAgICAvL25ldyBwcm9qZWN0IGJ1dHRvblxuICAgIGNvbnN0IG5ld1Byb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBuZXdQcm9qZWN0LmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtYnV0dG9uJyk7XG4gICAgXG4gICAgY29uc3QgYnV0dG9uVGV4dCA9ICdDcmVhdGUgTmV3IExpc3QnXG4gICAgY29uc3QgbmV3SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBuZXdJY29uLmNsYXNzTGlzdC5hZGQgKCdtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkJywgJ2VkaXQnKTtcbiAgICBuZXdJY29uLnRleHRDb250ZW50ID0gJ2FkZCc7XG5cbiAgICBuZXdQcm9qZWN0LmFwcGVuZChuZXdJY29uLCBidXR0b25UZXh0KTtcbiAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKG5ld1Byb2plY3QpO1xuICAgIG5ld1Byb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBidG5BY3Rpb25zLnNob3dGb3JtKCdDcmVhdGUgTmV3IExpc3QnKTtcbiAgICAgIGJ0bkFjdGlvbnMubmV3UHJvamVjdCgpO1xuICAgIH0pO1xuICAgIFxuICB9XG5cbiAgY29uc3QgcmVmcmVzaEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsLWJ0blwiKTtcbiAgICBjYW5jZWxCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gYnRuQWN0aW9ucy5kZWxldGVQcm9qZWN0KGUsIGN1cnJlbnQpLCB7b25jZTogdHJ1ZX0pO1xuICAgIFxuICB9XG5cblxuICAvL3Byb2plY3QgZmFjdG9yeSBmdW5jdGlvblxuICBjb25zdCBjcmVhdGVQcm9qZWN0ID0gKG5hbWUpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0ID0ge25hbWUsIGlkOm5ldyBEYXRlKCkuZ2V0VGltZSgpfVxuICAgIHByb2plY3RMaXN0LnB1c2gocHJvamVjdCk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0TGlzdFwiLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0TGlzdCkpO1xuXG4gICAgcG9wdWxhdGVQcm9qZWN0RHJvcERvd24oKTtcbiAgICBkaXNwbGF5UHJvamVjdCgpO1xuICAgIC8vIGNyZWF0ZVByb2plY3RBcnJheSgpO1xuICB9XG5cbiAgY29uc3QgdXBkYXRlUHJvamVjdCA9IChjdXJyZW50LCBuZXdOYW1lKSA9PiB7XG4gICAgLy8gbGV0IGluZGV4ID0gcHJvamVjdExpc3QuaW5kZXhPZihjdXJyZW50KTtcbiAgICBcbiAgICBjdXJyZW50Lm5hbWUgPSBuZXdOYW1lO1xuICAgIGNvbnNvbGUubG9nKGN1cnJlbnQpXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0TGlzdFwiLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0TGlzdCkpO1xuICAgIGRpc3BsYXlQcm9qZWN0KCk7XG4gICAgcG9wdWxhdGVQcm9qZWN0RHJvcERvd24oKTtcbiAgfVxuICAgICAgXG4gIGRpc3BsYXlQcm9qZWN0KCk7XG4gIHBvcHVsYXRlUHJvamVjdERyb3BEb3duKCk7XG4gIFxuICByZXR1cm4ge2NyZWF0ZVByb2plY3QsIHByb2plY3RMaXN0LCB1cGRhdGVQcm9qZWN0LCBkaXNwbGF5UHJvamVjdH1cbn0pKCk7IiwiaW1wb3J0IHsgcHJvamVjdFN0dWZmIH0gZnJvbSBcIi4vcHJvamVjdHNcIjtcbmltcG9ydCB7IHRvRG9TdHVmZiB9IGZyb20gXCIuL3RvZG9zXCI7XG5cbmV4cG9ydCBjb25zdCBidG5BY3Rpb25zID0gKCgpID0+IHtcbiAgY29uc3QgdG9kb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG9kbycpO1xuICBjb25zdCBmb3JtTWVzc2FnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtLW1lc3NhZ2UnKTtcbiAgY29uc3QgZm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWNvbnRhaW5lcicpO1xuICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtY29udGFpbmVyJyk7XG4gIFxuICBjb25zdCBkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUnKTtcbiAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJpb3JpdHknKTtcbiAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LXNlbGVjdCcpO1xuICBjb25zdCBzdWJtaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VibWl0LWJ0bicpO1xuICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsLWJ0bicpO1xuICBjb25zdCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbnMnKTtcblxuICBjb25zdCBuZXdUb0RvID0gKHByb2plY3QpID0+IHtcbiAgICBzaG93Rm9ybUlucHV0cygpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0JykudmFsdWUgPSBwcm9qZWN0LmlkO1xuICAgXG4gICAgc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRvRG9TdHVmZi5jcmVhdGVUb2RvKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpLnZhbHVlLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdCcpLnZhbHVlKTtcbiAgICAgIGhpZGVGb3JtKCk7XG4gICAgfSwge29uY2U6IHRydWV9KVxuICB9IFxuICBcbiAgY29uc3QgZWRpdFRvRG8gPSAoY3VycmVudCkgPT4geyBcbiAgICBzaG93Rm9ybUlucHV0cygpO1xuICAgIHN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiVXBkYXRlXCI7XG4gICAgc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRvRG9TdHVmZi51cGRhdGVUb2RvKGN1cnJlbnQsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpLnZhbHVlLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdCcpLnZhbHVlKTtcbiAgICAgIGhpZGVGb3JtKCk7XG4gICAgfSwge29uY2U6IHRydWV9KTtcblxuICAgICAgY2FuY2VsQnRuLnRleHRDb250ZW50ID0gXCJEZWxldGVcIjtcbiAgICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdG9Eb1N0dWZmLnRvRG9zLnNwbGljZSh0b0RvU3R1ZmYudG9Eb3MuaW5kZXhPZihjdXJyZW50KSwgMSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9Eb3NcIiwgSlNPTi5zdHJpbmdpZnkodG9Eb1N0dWZmLnRvRG9zKSk7XG4gICAgICAgIHByb2plY3RTdHVmZi5kaXNwbGF5UHJvamVjdCgpO1xuICAgICAgICBoaWRlRm9ybSgpO1xuICAgICAgfSwge29uY2U6IHRydWV9KTtcbiAgfSBcblxuICAgIGNvbnN0IG5ld1Byb2plY3QgPSAoKSA9PiB7XG4gICAgICBoaWRlRm9ybUlucHV0cygpO1xuICAgICAgY29uc3Qgc3ViQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICBzdWJCdG4udGV4dENvbnRlbnQgPSBcIlN1Ym1pdFwiO1xuICAgICAgc3ViQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBwcm9qZWN0U3R1ZmYuY3JlYXRlUHJvamVjdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpLnZhbHVlKTtcbiAgICAgICAgaGlkZUZvcm0oKTtcbiAgICAgIH0sIHtvbmNlOiB0cnVlfSlcbiAgICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoc3ViQnRuKVxuICAgIH0gXG5cbiAgICBjb25zdCBlZGl0UHJvamVjdCA9IChjdXJyZW50KSA9PiB7IFxuICAgICAgaGlkZUZvcm1JbnB1dHMoKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUgPSBjdXJyZW50Lm5hbWU7XG4gICAgICBcbiAgICAgIGNvbnN0IHN1YkJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgc3ViQnRuLnRleHRDb250ZW50ID0gXCJVcGRhdGVcIjtcbiAgICAgIHN1YkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcHJvamVjdFN0dWZmLnVwZGF0ZVByb2plY3QoY3VycmVudCwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKS52YWx1ZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RTdHVmZi5wcm9qZWN0TGlzdClcbiAgICAgICAgaGlkZUZvcm0oKTtcbiAgICAgIH0sIHtvbmNlOiB0cnVlfSk7XG4gICAgICBidXR0b25zLmFwcGVuZENoaWxkKHN1YkJ0bik7XG4gICAgICBcbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gXCJEZWxldGVcIlxuICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGRlbGV0ZVByb2plY3QoZSwgY3VycmVudCksIHtvbmNlOiB0cnVlfSk7XG4gICAgICBidXR0b25zLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XG4gICAgfVxuXG4gICAgY29uc3QgZGVsZXRlUHJvamVjdCA9IChlLCBjdXJyZW50KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhjdXJyZW50LCBcImN1cnJlbnRcIilcbiAgICAgIGNvbnNvbGUubG9nKHByb2plY3RTdHVmZi5wcm9qZWN0TGlzdClcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIC8vcnVubmluZyBtdWx0aXBsZSB0aW1lc1xuICAgICAgcHJvamVjdFN0dWZmLnByb2plY3RMaXN0LnNwbGljZShwcm9qZWN0U3R1ZmYucHJvamVjdExpc3QuaW5kZXhPZihjdXJyZW50KSwgMSk7XG4gICAgICBjb25zb2xlLmxvZyhwcm9qZWN0U3R1ZmYucHJvamVjdExpc3QpXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RMaXN0XCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RTdHVmZi5wcm9qZWN0TGlzdCkpO1xuICAgICAgcHJvamVjdFN0dWZmLmRpc3BsYXlQcm9qZWN0KCk7XG4gICAgICBoaWRlRm9ybSgpO1xuICAgIH1cbiAgXG5cbiAgICBjb25zdCBzaG93Rm9ybSA9IChtc2cpID0+IHtcbiAgICAgIGJ1dHRvbnMuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAvL3Jlc2V0IHByaW9yaXR5IGFuZCBwcm9qZWN0XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKS5zZWxlY3RlZEluZGV4ID0gMDtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0Jykuc2VsZWN0ZWRJbmRleCA9IDA7XG4gICAgICAvLyByZXNldCBpbnB1dHNcbiAgICAgIGxldCBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaW5wdXRzW2ldLnZhbHVlID0gXCJcIjtcbiAgICAgIH1cbiAgICAgIHByb2plY3RDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICBmb3JtTWVzc2FnZS50ZXh0Q29udGVudCA9IG1zZztcbiAgICAgIGZvcm1Db250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAvLyBzdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlN1Ym1pdFwiO1xuICAgICAgLy8gY2FuY2VsQnRuLnRleHRDb250ZW50ID0gXCJDYW5jZWxcIjtcbiAgICB9IFxuXG4gIGNvbnN0IHNob3dGb3JtSW5wdXRzID0gKCkgPT4ge1xuICAgIGRhdGUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgcHJpb3JpdHkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgcHJvamVjdC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgfVxuXG4gIGNvbnN0IGhpZGVGb3JtSW5wdXRzID0gKCkgPT4ge1xuICAgIGRhdGUuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgcHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgcHJvamVjdC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAvLyBjYW5jZWxCdG4uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIGNvbnN0IGhpZGVGb3JtID0gKCkgPT4ge1xuICAgIHRvZG9CdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgZm9ybU1lc3NhZ2UudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGZvcm1Db250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgcHJvamVjdENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgfVxuICBcbiAgcmV0dXJuIHtzaG93Rm9ybSwgaGlkZUZvcm0sIG5ld1RvRG8sIGVkaXRUb0RvLCBuZXdQcm9qZWN0LCBlZGl0UHJvamVjdCwgZGVsZXRlUHJvamVjdH1cbn0pKCk7XG5cbiAgIl0sIm5hbWVzIjpbInRvRG9TdHVmZiIsInRvRG9zIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNyZWF0ZVRvZG8iLCJuYW1lIiwiZGF0ZSIsInByaW9yaXR5IiwicHJvamVjdE5hbWUiLCJ0b0RvIiwiaWQiLCJEYXRlIiwiZ2V0VGltZSIsInB1c2giLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwicHJvamVjdFN0dWZmIiwiZGlzcGxheVByb2plY3QiLCJ1cGRhdGVUb2RvIiwiY3VycmVudCIsInByb2plY3QiLCJwcm9qZWN0TGlzdCIsInBvcHVsYXRlUHJvamVjdERyb3BEb3duIiwicHJvamVjdFNlbGVjdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJmb3JFYWNoIiwiZSIsInByb2plY3RPcHRpb24iLCJjcmVhdGVFbGVtZW50IiwidmFsdWUiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwicHJvamVjdENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9qZWN0RGl2IiwiY2xhc3NOYW1lIiwiZWRpdEljb24iLCJhZGRFdmVudExpc3RlbmVyIiwiYnRuQWN0aW9ucyIsInNob3dGb3JtIiwiZWRpdFByb2plY3QiLCJvbmNlIiwibmV3VG9kbyIsIm5ld0ljb24iLCJhcHBlbmQiLCJuZXdUb0RvIiwidCIsInRvRG9JdGVtIiwiY2hlY2tib3giLCJ0b0RvTmFtZSIsInRvRG9Qcmlvcml0eSIsInRvRG9EYXRlIiwiZWRpdFRvRG8iLCJuZXdQcm9qZWN0IiwiY3JlYXRlUHJvamVjdCIsInVwZGF0ZVByb2plY3QiLCJuZXdOYW1lIiwiY29uc29sZSIsImxvZyIsInRvZG9CdG4iLCJmb3JtTWVzc2FnZSIsImZvcm1Db250YWluZXIiLCJzdWJtaXRCdG4iLCJjYW5jZWxCdG4iLCJidXR0b25zIiwiZGVsZXRlUHJvamVjdCIsInByZXZlbnREZWZhdWx0Iiwic3BsaWNlIiwiaW5kZXhPZiIsImhpZGVGb3JtIiwic2hvd0Zvcm1JbnB1dHMiLCJyZW1vdmUiLCJoaWRlRm9ybUlucHV0cyIsIm1zZyIsInNlbGVjdGVkSW5kZXgiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaSIsImxlbmd0aCIsInN1YkJ0biIsImRlbGV0ZUJ0biJdLCJzb3VyY2VSb290IjoiIn0=