(()=>{"use strict";const e=(()=>{let e=JSON.parse(localStorage.getItem("toDos"))||[];return{createTodo:(o,n,c,d)=>{let r={name:o,date:n,priority:c,projectId:parseInt(d),id:(new Date).getTime()};return e.push(r),localStorage.setItem("toDos",JSON.stringify(e)),t.displayProject(),{toDos:e}},toDos:e,updateTodo:(o,n,c,d,r)=>{let a=parseInt(r);o.name=n,o.date=c,o.priority=d,o.projectId=a,localStorage.setItem("toDos",JSON.stringify(e)),t.displayProject()}}})(),t=(()=>{const t=JSON.parse(localStorage.getItem("projectList"))||[{name:"Personal",id:1}],n=()=>{const e=document.getElementById("project");e.innerHTML="",t.forEach((t=>{const o=document.createElement("option");o.value=t.id,o.setAttribute("dataset",t.id),o.classList.add("project-option"),o.textContent=t.name,e.appendChild(o)}))},c=()=>{const n=document.querySelector(".project-container");n.innerHTML="",t.forEach((c=>{const d=document.createElement("div");d.className="project-div";const r=document.createElement("h2");r.classList.add("project-name");const a=document.createElement("span");a.classList.add("material-symbols-outlined","edit"),a.textContent="edit",a.addEventListener("click",(()=>{o.showForm("Edit Project Name"),o.editProject(c)}),{once:!0});const s=document.createElement("button");s.classList.add("add-todo","project-icon");const l=document.createElement("span");l.classList.add("material-symbols-outlined","edit"),l.textContent="add",s.append(l,"Add To Do"),s.addEventListener("click",(()=>{o.showForm("Create New Item"),o.newToDo(c)}),{once:!0}),r.textContent=c.name,n.appendChild(d),d.appendChild(r),r.appendChild(a),d.appendChild(s),localStorage.setItem("projectList",JSON.stringify(t)),e.toDos.forEach((e=>{if(e.projectId===c.id){const t=document.createElement("div");t.classList.add("to-do-item"),t.setAttribute("id",e.id);const n=document.createElement("input");n.setAttribute("type","checkbox");const c=document.createElement("span");c.textContent=e.name;const r=document.createElement("span");r.textContent=e.priority;const a=document.createElement("span");a.textContent=e.date;const s=document.createElement("span");s.classList.add("material-symbols-outlined","edit"),s.textContent="edit",s.addEventListener("click",(()=>{o.showForm("Edit To Do"),o.editToDo(e)})),d.appendChild(t),t.append(n,c,r,a,s)}}))}));const c=document.createElement("button");c.classList.add("project-icon");const d=document.createElement("span");d.classList.add("material-symbols-outlined","edit"),d.textContent="add",c.append(d,"Create New List"),n.appendChild(c),c.addEventListener("click",(()=>{o.showForm("Create New List"),o.newProject()}))};return c(),n(),{createProject:e=>{const o={name:e,id:(new Date).getTime()};t.push(o),localStorage.setItem("projectList",JSON.stringify(t)),n(),c()},projectList:t,updateProject:(e,o)=>{e.name=o,localStorage.setItem("projectList",JSON.stringify(t)),c(),n()},displayProject:c}})(),o=(()=>{const o=document.querySelector(".add-todo"),n=document.querySelector("#form-message"),c=document.querySelector(".form-container"),d=document.querySelector(".project-container"),r=document.querySelector(".date"),a=document.querySelector(".priority"),s=document.querySelector(".project-select"),l=document.querySelector(".buttons"),i=(e,o)=>{e.preventDefault(),t.projectList.splice(t.projectList.indexOf(o),1),console.log(t.projectList),localStorage.setItem("projectList",JSON.stringify(t.projectList)),t.displayProject(),p()},u=()=>{r.classList.remove("hidden"),a.classList.remove("hidden"),s.classList.remove("hidden")},m=()=>{r.classList.add("hidden"),a.classList.add("hidden"),s.classList.add("hidden")},p=()=>{o.classList.remove("hidden"),n.textContent="",c.classList.add("hidden"),d.classList.remove("hidden")};return{showForm:e=>{l.innerHTML="",document.querySelector("#priority").selectedIndex=0,document.querySelector("#project").selectedIndex=0;let t=document.querySelectorAll("input");for(let e=0;e<t.length;e++)t[e].value="";d.classList.add("hidden"),n.textContent=e,c.classList.remove("hidden")},hideForm:p,newToDo:o=>{u(),document.querySelector("#project").value=o.id;const n=document.createElement("button");n.textContent="Submit",n.addEventListener("click",(t=>{t.preventDefault(),e.createTodo(document.querySelector("#name").value,document.querySelector("#date").value,document.querySelector("#priority").value,document.querySelector("#project").value),p()}),{once:!0}),l.appendChild(n);const c=document.createElement("button");c.textContent="Cancel",c.addEventListener("click",(e=>{e.preventDefault(),p(),t.displayProject()}),{once:!0}),l.appendChild(c)},editToDo:o=>{u(),document.querySelector("#name").value=o.name,document.querySelector("#date").value=o.date,document.querySelector("#priority").value=o.priority,document.querySelector("#project").value=o.projectId;const n=document.createElement("button");n.textContent="Update",n.addEventListener("click",(t=>{t.preventDefault(),e.updateTodo(o,document.querySelector("#name").value,document.querySelector("#date").value,document.querySelector("#priority").value,document.querySelector("#project").value),p()}),{once:!0}),l.appendChild(n);const c=document.createElement("button");c.textContent="Delete",c.addEventListener("click",(n=>{n.preventDefault(),e.toDos.splice(e.toDos.indexOf(o),1),localStorage.setItem("toDos",JSON.stringify(e.toDos)),t.displayProject(),p()}),{once:!0}),l.appendChild(c)},newProject:()=>{m();const e=document.createElement("button");e.textContent="Submit",e.addEventListener("click",(e=>{e.preventDefault(),t.createProject(document.querySelector("#name").value),p()}),{once:!0}),l.appendChild(e);const o=document.createElement("button");o.textContent="Cancel",o.addEventListener("click",(e=>{e.preventDefault(),p(),t.displayProject()}),{once:!0}),l.appendChild(o)},editProject:e=>{m(),document.querySelector("#name").value=e.name;const o=document.createElement("button");o.textContent="Update",o.addEventListener("click",(o=>{o.preventDefault(),t.updateProject(e,document.querySelector("#name").value),console.log(t.projectList),p()}),{once:!0}),l.appendChild(o);const n=document.createElement("button");n.textContent="Delete",n.addEventListener("click",(t=>i(t,e)),{once:!0}),l.appendChild(n)},deleteProject:i}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQVFaLEVBQVFoQixLQUVoRCxNQUFNZ0YsRUFBUzNELFNBQVNNLGNBQWMsVUFDdENxRCxFQUFPaEQsWUFBYyxTQUNyQmdELEVBQU94QyxpQkFBaUIsU0FBVWYsSUFDaENBLEVBQUV3QyxpQkFDRnBELEVBQWE2QyxjQUFjMUMsRUFBU0ssU0FBU2MsY0FBYyxTQUFTUCxPQUNwRXdDLFFBQVFDLElBQUl4RCxFQUFhSyxhQUN6Qm9ELEdBQVUsR0FDVCxDQUFDMUIsTUFBTSxJQUNWbUIsRUFBUTlCLFlBQVkrQyxHQUVwQixNQUFNRSxFQUFZN0QsU0FBU00sY0FBYyxVQUN6Q3VELEVBQVVsRCxZQUFjLFNBQ3hCa0QsRUFBVTFDLGlCQUFpQixTQUFVZixHQUFNdUMsRUFBY3ZDLEVBQUdULElBQVUsQ0FBQzRCLE1BQU0sSUFDN0VtQixFQUFROUIsWUFBWWlELEVBQVUsRUFtRHNDbEIsZ0JBQ3pFLEVBeEp5QixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG8tZG9zLy4vc3JjL3RvZG9zLmpzIiwid2VicGFjazovL3RvLWRvcy8uL3NyYy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly90by1kb3MvLi9zcmMvYnRuLWFjdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJvamVjdFN0dWZmIH0gZnJvbSBcIi4vcHJvamVjdHNcIjtcbmltcG9ydCB7IGJ0bkFjdGlvbnMgfSBmcm9tIFwiLi9idG4tYWN0aW9uc1wiO1xuXG5leHBvcnQgY29uc3QgdG9Eb1N0dWZmID0gKCgpID0+IHtcbmxldCB0b0RvcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0b0Rvc1wiKSkgfHwgW107XG4gIGNvbnN0IGNyZWF0ZVRvZG8gPSAobmFtZSwgZGF0ZSwgcHJpb3JpdHksIHBJZCkgPT4ge1xuICAgIGxldCBwcm9qZWN0SWQgPSBwYXJzZUludChwSWQpO1xuICAgIGxldCB0b0RvID0ge25hbWUsIGRhdGUsIHByaW9yaXR5LCBwcm9qZWN0SWQsIGlkOm5ldyBEYXRlKCkuZ2V0VGltZSgpfTtcbiAgICB0b0Rvcy5wdXNoKHRvRG8pO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9Eb3NcIiwgSlNPTi5zdHJpbmdpZnkodG9Eb3MpKTtcbiAgICBwcm9qZWN0U3R1ZmYuZGlzcGxheVByb2plY3QoKTtcbiAgICByZXR1cm4ge3RvRG9zfTtcbiAgfVxuXG5cbiAgY29uc3QgdXBkYXRlVG9kbyA9IChjdXJyZW50LCBuYW1lLCBkYXRlLCBwcmlvcml0eSwgcHJvamVjdCkgPT4ge1xuICAgIGxldCBwcm9qZWN0SWQgPSBwYXJzZUludChwcm9qZWN0KTtcblxuICAgIGN1cnJlbnQubmFtZSA9IG5hbWU7XG4gICAgY3VycmVudC5kYXRlID0gZGF0ZTtcbiAgICBjdXJyZW50LnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgY3VycmVudC5wcm9qZWN0SWQgPSBwcm9qZWN0SWQ7XG4gIFxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9Eb3NcIiwgSlNPTi5zdHJpbmdpZnkodG9Eb3MpKTtcbiAgICBwcm9qZWN0U3R1ZmYuZGlzcGxheVByb2plY3QoKTtcbiAgfVxuXG4gIHJldHVybiB7IGNyZWF0ZVRvZG8sIHRvRG9zLCB1cGRhdGVUb2RvIH07XG59KSgpOyIsImltcG9ydCB7IGJ0bkFjdGlvbnMgfSBmcm9tIFwiLi9idG4tYWN0aW9uc1wiO1xuaW1wb3J0IHsgdG9Eb1N0dWZmIH0gZnJvbSBcIi4vdG9kb3NcIjtcblxuZXhwb3J0IGNvbnN0IHByb2plY3RTdHVmZiA9ICgoKSA9PiB7XG4gIC8vIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICBjb25zdCBwcm9qZWN0TGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwcm9qZWN0TGlzdFwiKSkgfHwgW3tuYW1lOidQZXJzb25hbCcsIGlkOjF9XTtcbiAgXG4gIFxuICAvL2FkZCBwcm9qZWN0IHRvIGRyb3AtZG93blxuICBjb25zdCBwb3B1bGF0ZVByb2plY3REcm9wRG93biA9ICgpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3QnKTtcbiAgICBwcm9qZWN0U2VsZWN0LmlubmVySFRNTCA9IFwiXCI7XG4gICAgcHJvamVjdExpc3QuZm9yRWFjaCgoZSkgPT4ge1xuICAgICAgY29uc3QgcHJvamVjdE9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgcHJvamVjdE9wdGlvbi52YWx1ZSA9IGUuaWQ7XG4gICAgICBwcm9qZWN0T3B0aW9uLnNldEF0dHJpYnV0ZSgnZGF0YXNldCcsIGUuaWQpO1xuICAgICAgcHJvamVjdE9wdGlvbi5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LW9wdGlvbicpO1xuICAgICAgcHJvamVjdE9wdGlvbi50ZXh0Q29udGVudCA9IGUubmFtZTtcbiAgICAgIHByb2plY3RTZWxlY3QuYXBwZW5kQ2hpbGQocHJvamVjdE9wdGlvbik7XG4gICAgfSk7XG4gIH1cblxuICAvL3Nob3cgcHJvamVjdCBuYW1lIG9uIHBhZ2VcbiAgY29uc3QgZGlzcGxheVByb2plY3QgPSAoKSA9PiB7XG4gICAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWNvbnRhaW5lcicpO1xuICAgIHByb2plY3RDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgXG4gICAgcHJvamVjdExpc3QuZm9yRWFjaCgoZSkgPT4ge1xuICAgICAgY29uc3QgcHJvamVjdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgLy8gcHJvamVjdERpdi5kYXRhc2V0LnByb2plY3QgPSBlLnJlcGxhY2UoL1xccysvZywgJy0nKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgcHJvamVjdERpdi5jbGFzc05hbWUgPSBcInByb2plY3QtZGl2XCI7XG4gICAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICBwcm9qZWN0TmFtZS5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LW5hbWUnKTtcbiAgICAgIGNvbnN0IGVkaXRJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgZWRpdEljb24uY2xhc3NMaXN0LmFkZCAoJ21hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQnLCAnZWRpdCcpO1xuICAgICAgZWRpdEljb24udGV4dENvbnRlbnQgPSAnZWRpdCc7XG4gICAgICBlZGl0SWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgYnRuQWN0aW9ucy5zaG93Rm9ybShgRWRpdCBQcm9qZWN0IE5hbWVgKTtcbiAgICAgICAgYnRuQWN0aW9ucy5lZGl0UHJvamVjdChlKTtcbiAgICAgIH0sIHtvbmNlOiB0cnVlfSk7XG5cbiAgICAgIC8vdG9kbyBidXR0b25cbiAgICAgIGNvbnN0IG5ld1RvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgIG5ld1RvZG8uY2xhc3NMaXN0LmFkZCgnYWRkLXRvZG8nLCAncHJvamVjdC1pY29uJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvblRleHRUb2RvID0gJ0FkZCBUbyBEbydcbiAgICAgIGNvbnN0IG5ld0ljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBuZXdJY29uLmNsYXNzTGlzdC5hZGQgKCdtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkJywgJ2VkaXQnKTtcbiAgICAgIG5ld0ljb24udGV4dENvbnRlbnQgPSAnYWRkJztcblxuICAgICAgbmV3VG9kby5hcHBlbmQobmV3SWNvbiwgYnV0dG9uVGV4dFRvZG8pO1xuICAgICAgbmV3VG9kby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgYnRuQWN0aW9ucy5zaG93Rm9ybSgnQ3JlYXRlIE5ldyBJdGVtJylcbiAgICAgICAgYnRuQWN0aW9ucy5uZXdUb0RvKGUpO1xuICAgICAgfSwge29uY2U6IHRydWV9KTtcblxuICAgICAgcHJvamVjdE5hbWUudGV4dENvbnRlbnQgPSBlLm5hbWU7XG4gICAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3REaXYpO1xuICAgICAgcHJvamVjdERpdi5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZSk7XG4gICAgICBwcm9qZWN0TmFtZS5hcHBlbmRDaGlsZChlZGl0SWNvbik7XG4gICAgICBwcm9qZWN0RGl2LmFwcGVuZENoaWxkKG5ld1RvZG8pO1xuXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RMaXN0XCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RMaXN0KSk7XG4gICAgICBcbiAgICAgIHRvRG9TdHVmZi50b0Rvcy5mb3JFYWNoKCh0KSA9PiB7XG4gICAgICAgIFxuICAgICAgICBpZiAodC5wcm9qZWN0SWQgPT09IGUuaWQpIHtcbiAgICAgICAgICBjb25zdCB0b0RvSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIHRvRG9JdGVtLmNsYXNzTGlzdC5hZGQoJ3RvLWRvLWl0ZW0nKTtcbiAgICAgICAgICB0b0RvSXRlbS5zZXRBdHRyaWJ1dGUoJ2lkJywgdC5pZCk7XG4gICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgICAgICAgY2hlY2tib3guc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNoZWNrYm94XCIpO1xuICAgICAgICAgIGNvbnN0IHRvRG9OYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgIHRvRG9OYW1lLnRleHRDb250ZW50ID0gdC5uYW1lO1xuICAgICAgICAgIGNvbnN0IHRvRG9Qcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICB0b0RvUHJpb3JpdHkudGV4dENvbnRlbnQgPSB0LnByaW9yaXR5O1xuICAgICAgICAgIGNvbnN0IHRvRG9EYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgIHRvRG9EYXRlLnRleHRDb250ZW50ID0gdC5kYXRlO1xuICAgICAgICAgIGNvbnN0IGVkaXRJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgIGVkaXRJY29uLmNsYXNzTGlzdC5hZGQgKCdtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkJywgJ2VkaXQnKTtcbiAgICAgICAgICBlZGl0SWNvbi50ZXh0Q29udGVudCA9ICdlZGl0JztcbiAgICAgICAgICBlZGl0SWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGJ0bkFjdGlvbnMuc2hvd0Zvcm0oJ0VkaXQgVG8gRG8nKVxuICAgICAgICAgICAgYnRuQWN0aW9ucy5lZGl0VG9Ebyh0KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHByb2plY3REaXYuYXBwZW5kQ2hpbGQodG9Eb0l0ZW0pO1xuICAgICAgICAgIHRvRG9JdGVtLmFwcGVuZChjaGVja2JveCwgdG9Eb05hbWUsIHRvRG9Qcmlvcml0eSwgdG9Eb0RhdGUsIGVkaXRJY29uKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgIH0pXG5cbiAgICAvL25ldyBwcm9qZWN0IGJ1dHRvblxuICAgIGNvbnN0IG5ld1Byb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBuZXdQcm9qZWN0LmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtaWNvbicpO1xuICAgIFxuICAgIGNvbnN0IGJ1dHRvblRleHQgPSAnQ3JlYXRlIE5ldyBMaXN0J1xuICAgIGNvbnN0IG5ld0ljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgbmV3SWNvbi5jbGFzc0xpc3QuYWRkICgnbWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCcsICdlZGl0Jyk7XG4gICAgbmV3SWNvbi50ZXh0Q29udGVudCA9ICdhZGQnO1xuXG4gICAgbmV3UHJvamVjdC5hcHBlbmQobmV3SWNvbiwgYnV0dG9uVGV4dCk7XG4gICAgcHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChuZXdQcm9qZWN0KTtcbiAgICBuZXdQcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgYnRuQWN0aW9ucy5zaG93Rm9ybSgnQ3JlYXRlIE5ldyBMaXN0Jyk7XG4gICAgICBidG5BY3Rpb25zLm5ld1Byb2plY3QoKTtcbiAgICB9KTtcbiAgICBcbiAgfVxuXG4gIGNvbnN0IHJlZnJlc2hFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbmNlbC1idG5cIik7XG4gICAgY2FuY2VsQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGJ0bkFjdGlvbnMuZGVsZXRlUHJvamVjdChlLCBjdXJyZW50KSwge29uY2U6IHRydWV9KTtcbiAgICBcbiAgfVxuXG5cbiAgLy9wcm9qZWN0IGZhY3RvcnkgZnVuY3Rpb25cbiAgY29uc3QgY3JlYXRlUHJvamVjdCA9IChuYW1lKSA9PiB7XG4gICAgY29uc3QgcHJvamVjdCA9IHtuYW1lLCBpZDpuZXcgRGF0ZSgpLmdldFRpbWUoKX1cbiAgICBwcm9qZWN0TGlzdC5wdXNoKHByb2plY3QpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdExpc3RcIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdExpc3QpKTtcblxuICAgIHBvcHVsYXRlUHJvamVjdERyb3BEb3duKCk7XG4gICAgZGlzcGxheVByb2plY3QoKTtcbiAgICAvLyBjcmVhdGVQcm9qZWN0QXJyYXkoKTtcbiAgfVxuXG4gIGNvbnN0IHVwZGF0ZVByb2plY3QgPSAoY3VycmVudCwgbmV3TmFtZSkgPT4ge1xuICAgIC8vIGxldCBpbmRleCA9IHByb2plY3RMaXN0LmluZGV4T2YoY3VycmVudCk7XG4gICAgXG4gICAgY3VycmVudC5uYW1lID0gbmV3TmFtZTtcbiAgICAvLyBjb25zb2xlLmxvZyhjdXJyZW50KVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdExpc3RcIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdExpc3QpKTtcbiAgICBkaXNwbGF5UHJvamVjdCgpO1xuICAgIHBvcHVsYXRlUHJvamVjdERyb3BEb3duKCk7XG4gIH1cbiAgICAgIFxuICBkaXNwbGF5UHJvamVjdCgpO1xuICBwb3B1bGF0ZVByb2plY3REcm9wRG93bigpO1xuICBcbiAgcmV0dXJuIHtjcmVhdGVQcm9qZWN0LCBwcm9qZWN0TGlzdCwgdXBkYXRlUHJvamVjdCwgZGlzcGxheVByb2plY3R9XG59KSgpOyIsImltcG9ydCB7IHByb2plY3RTdHVmZiB9IGZyb20gXCIuL3Byb2plY3RzXCI7XG5pbXBvcnQgeyB0b0RvU3R1ZmYgfSBmcm9tIFwiLi90b2Rvc1wiO1xuXG5leHBvcnQgY29uc3QgYnRuQWN0aW9ucyA9ICgoKSA9PiB7XG4gIGNvbnN0IHRvZG9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRvZG8nKTtcbiAgY29uc3QgZm9ybU1lc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybS1tZXNzYWdlJyk7XG4gIGNvbnN0IGZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1jb250YWluZXInKTtcbiAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWNvbnRhaW5lcicpO1xuICBcbiAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRlJyk7XG4gIGNvbnN0IHByaW9yaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByaW9yaXR5Jyk7XG4gIGNvbnN0IHByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1zZWxlY3QnKTtcbiAgY29uc3QgYnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25zJyk7XG5cbiAgY29uc3QgbmV3VG9EbyA9IChwcm9qZWN0KSA9PiB7XG4gICAgc2hvd0Zvcm1JbnB1dHMoKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdCcpLnZhbHVlID0gcHJvamVjdC5pZDtcblxuICAgIGNvbnN0IHN1YkJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHN1YkJ0bi50ZXh0Q29udGVudCA9IFwiU3VibWl0XCI7XG4gICAgc3ViQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRvRG9TdHVmZi5jcmVhdGVUb2RvKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpLnZhbHVlLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdCcpLnZhbHVlKTtcbiAgICAgIGhpZGVGb3JtKCk7XG4gICAgfSwge29uY2U6IHRydWV9KVxuICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoc3ViQnRuKTtcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGNhbmNlbEJ0bi50ZXh0Q29udGVudCA9IFwiQ2FuY2VsXCJcbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaGlkZUZvcm0oKTtcbiAgICAgIHByb2plY3RTdHVmZi5kaXNwbGF5UHJvamVjdCgpO1xuICAgIH0sIHtvbmNlOiB0cnVlfSk7XG4gICAgYnV0dG9ucy5hcHBlbmRDaGlsZChjYW5jZWxCdG4pO1xuICB9IFxuICBcbiAgY29uc3QgZWRpdFRvRG8gPSAoY3VycmVudCkgPT4geyBcbiAgICBzaG93Rm9ybUlucHV0cygpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUgPSBjdXJyZW50Lm5hbWU7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKS52YWx1ZSA9IGN1cnJlbnQuZGF0ZTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKS52YWx1ZSA9IGN1cnJlbnQucHJpb3JpdHk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QnKS52YWx1ZSA9IGN1cnJlbnQucHJvamVjdElkO1xuXG4gICAgY29uc3Qgc3ViQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgc3ViQnRuLnRleHRDb250ZW50ID0gXCJVcGRhdGVcIjtcbiAgICBzdWJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdG9Eb1N0dWZmLnVwZGF0ZVRvZG8oY3VycmVudCwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKS52YWx1ZSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKS52YWx1ZSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaW9yaXR5JykudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0JykudmFsdWUpO1xuICAgICAgaGlkZUZvcm0oKTtcbiAgICB9LCB7b25jZTogdHJ1ZX0pO1xuICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoc3ViQnRuKTtcblxuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9IFwiRGVsZXRlXCJcbiAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdG9Eb1N0dWZmLnRvRG9zLnNwbGljZSh0b0RvU3R1ZmYudG9Eb3MuaW5kZXhPZihjdXJyZW50KSwgMSk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvRG9zXCIsIEpTT04uc3RyaW5naWZ5KHRvRG9TdHVmZi50b0RvcykpO1xuICAgICAgcHJvamVjdFN0dWZmLmRpc3BsYXlQcm9qZWN0KCk7XG4gICAgICBoaWRlRm9ybSgpO1xuICAgIH0sIHtvbmNlOiB0cnVlfSk7XG4gICAgYnV0dG9ucy5hcHBlbmRDaGlsZChkZWxldGVCdG4pO1xuICB9IFxuXG4gICAgY29uc3QgbmV3UHJvamVjdCA9ICgpID0+IHtcbiAgICAgIGhpZGVGb3JtSW5wdXRzKCk7XG4gICAgICBjb25zdCBzdWJCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgIHN1YkJ0bi50ZXh0Q29udGVudCA9IFwiU3VibWl0XCI7XG4gICAgICBzdWJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHByb2plY3RTdHVmZi5jcmVhdGVQcm9qZWN0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUpO1xuICAgICAgICBoaWRlRm9ybSgpO1xuICAgICAgfSwge29uY2U6IHRydWV9KVxuICAgICAgYnV0dG9ucy5hcHBlbmRDaGlsZChzdWJCdG4pXG5cbiAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgY2FuY2VsQnRuLnRleHRDb250ZW50ID0gXCJDYW5jZWxcIlxuICAgICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBoaWRlRm9ybSgpO1xuICAgICAgICBwcm9qZWN0U3R1ZmYuZGlzcGxheVByb2plY3QoKTtcbiAgICAgIH0sIHtvbmNlOiB0cnVlfSk7XG4gICAgICBidXR0b25zLmFwcGVuZENoaWxkKGNhbmNlbEJ0bik7XG4gICAgfSBcblxuICAgIGNvbnN0IGVkaXRQcm9qZWN0ID0gKGN1cnJlbnQpID0+IHsgXG4gICAgICBoaWRlRm9ybUlucHV0cygpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKS52YWx1ZSA9IGN1cnJlbnQubmFtZTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3ViQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICBzdWJCdG4udGV4dENvbnRlbnQgPSBcIlVwZGF0ZVwiO1xuICAgICAgc3ViQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBwcm9qZWN0U3R1ZmYudXBkYXRlUHJvamVjdChjdXJyZW50LCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpLnZhbHVlKTtcbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdFN0dWZmLnByb2plY3RMaXN0KVxuICAgICAgICBoaWRlRm9ybSgpO1xuICAgICAgfSwge29uY2U6IHRydWV9KTtcbiAgICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoc3ViQnRuKTtcbiAgICAgIFxuICAgICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiXG4gICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZGVsZXRlUHJvamVjdChlLCBjdXJyZW50KSwge29uY2U6IHRydWV9KTtcbiAgICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoZGVsZXRlQnRuKTtcbiAgICB9XG5cbiAgICBjb25zdCBkZWxldGVQcm9qZWN0ID0gKGUsIGN1cnJlbnQpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIC8vcnVubmluZyBtdWx0aXBsZSB0aW1lc1xuICAgICAgcHJvamVjdFN0dWZmLnByb2plY3RMaXN0LnNwbGljZShwcm9qZWN0U3R1ZmYucHJvamVjdExpc3QuaW5kZXhPZihjdXJyZW50KSwgMSk7XG4gICAgICBjb25zb2xlLmxvZyhwcm9qZWN0U3R1ZmYucHJvamVjdExpc3QpXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RMaXN0XCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RTdHVmZi5wcm9qZWN0TGlzdCkpO1xuICAgICAgcHJvamVjdFN0dWZmLmRpc3BsYXlQcm9qZWN0KCk7XG4gICAgICBoaWRlRm9ybSgpO1xuICAgIH1cbiAgXG5cbiAgICBjb25zdCBzaG93Rm9ybSA9IChtc2cpID0+IHtcbiAgICAgIGJ1dHRvbnMuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAvL3Jlc2V0IHByaW9yaXR5IGFuZCBwcm9qZWN0XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKS5zZWxlY3RlZEluZGV4ID0gMDtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0Jykuc2VsZWN0ZWRJbmRleCA9IDA7XG4gICAgICAvLyByZXNldCBpbnB1dHNcbiAgICAgIGxldCBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaW5wdXRzW2ldLnZhbHVlID0gXCJcIjtcbiAgICAgIH1cbiAgICAgIHByb2plY3RDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICBmb3JtTWVzc2FnZS50ZXh0Q29udGVudCA9IG1zZztcbiAgICAgIGZvcm1Db250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAvLyBzdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlN1Ym1pdFwiO1xuICAgICAgLy8gY2FuY2VsQnRuLnRleHRDb250ZW50ID0gXCJDYW5jZWxcIjtcbiAgICB9IFxuXG4gIGNvbnN0IHNob3dGb3JtSW5wdXRzID0gKCkgPT4ge1xuICAgIGRhdGUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgcHJpb3JpdHkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgcHJvamVjdC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgfVxuXG4gIGNvbnN0IGhpZGVGb3JtSW5wdXRzID0gKCkgPT4ge1xuICAgIGRhdGUuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgcHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgcHJvamVjdC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAvLyBjYW5jZWxCdG4uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgfVxuXG4gIGNvbnN0IGhpZGVGb3JtID0gKCkgPT4ge1xuICAgIHRvZG9CdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgZm9ybU1lc3NhZ2UudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGZvcm1Db250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgcHJvamVjdENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgfVxuICBcbiAgcmV0dXJuIHtzaG93Rm9ybSwgaGlkZUZvcm0sIG5ld1RvRG8sIGVkaXRUb0RvLCBuZXdQcm9qZWN0LCBlZGl0UHJvamVjdCwgZGVsZXRlUHJvamVjdH1cbn0pKCk7XG5cbiAgIl0sIm5hbWVzIjpbInRvRG9TdHVmZiIsInRvRG9zIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNyZWF0ZVRvZG8iLCJuYW1lIiwiZGF0ZSIsInByaW9yaXR5IiwicElkIiwidG9EbyIsInByb2plY3RJZCIsInBhcnNlSW50IiwiaWQiLCJEYXRlIiwiZ2V0VGltZSIsInB1c2giLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwicHJvamVjdFN0dWZmIiwiZGlzcGxheVByb2plY3QiLCJ1cGRhdGVUb2RvIiwiY3VycmVudCIsInByb2plY3QiLCJwcm9qZWN0TGlzdCIsInBvcHVsYXRlUHJvamVjdERyb3BEb3duIiwicHJvamVjdFNlbGVjdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJmb3JFYWNoIiwiZSIsInByb2plY3RPcHRpb24iLCJjcmVhdGVFbGVtZW50IiwidmFsdWUiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwicHJvamVjdENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9qZWN0RGl2IiwiY2xhc3NOYW1lIiwicHJvamVjdE5hbWUiLCJlZGl0SWNvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJidG5BY3Rpb25zIiwic2hvd0Zvcm0iLCJlZGl0UHJvamVjdCIsIm9uY2UiLCJuZXdUb2RvIiwibmV3SWNvbiIsImFwcGVuZCIsIm5ld1RvRG8iLCJ0IiwidG9Eb0l0ZW0iLCJjaGVja2JveCIsInRvRG9OYW1lIiwidG9Eb1ByaW9yaXR5IiwidG9Eb0RhdGUiLCJlZGl0VG9EbyIsIm5ld1Byb2plY3QiLCJjcmVhdGVQcm9qZWN0IiwidXBkYXRlUHJvamVjdCIsIm5ld05hbWUiLCJ0b2RvQnRuIiwiZm9ybU1lc3NhZ2UiLCJmb3JtQ29udGFpbmVyIiwiYnV0dG9ucyIsImRlbGV0ZVByb2plY3QiLCJwcmV2ZW50RGVmYXVsdCIsInNwbGljZSIsImluZGV4T2YiLCJjb25zb2xlIiwibG9nIiwiaGlkZUZvcm0iLCJzaG93Rm9ybUlucHV0cyIsInJlbW92ZSIsImhpZGVGb3JtSW5wdXRzIiwibXNnIiwic2VsZWN0ZWRJbmRleCIsImlucHV0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpIiwibGVuZ3RoIiwic3ViQnRuIiwiY2FuY2VsQnRuIiwiZGVsZXRlQnRuIl0sInNvdXJjZVJvb3QiOiIifQ==